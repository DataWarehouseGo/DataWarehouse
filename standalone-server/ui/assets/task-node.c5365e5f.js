import{bH as T}from"./index.536c7d72.js";import{l as k}from"./lodash.bce5b897.js";const c=T({id:"project-task",state:()=>({preTaskOptions:[],postTaskOptions:[],preTasks:[],resources:[],mainJars:{},name:"",dependentResult:{}}),persist:!0,getters:{getPreTaskOptions(){return this.preTaskOptions},getPostTaskOptions(){return this.postTaskOptions},getPreTasks(){return this.preTasks},getResources(){return this.resources},getMainJar(e){return t=>e.mainJars[t]},getName(){return this.name},getDependentResult(){return this.dependentResult}},actions:{updateDefinition(e,t){if(!e)return;const{processTaskRelationList:r=[],taskDefinitionList:a=[]}=e,i=[],p={};if(a.forEach(s=>{p[s.code]=s.name,s.code!==t&&(s.taskType==="CONDITIONS"&&r.filter(o=>o.preTaskCode===s.code).length>=2||i.push({value:s.code,label:s.name}))}),this.preTaskOptions=k.exports.uniqBy(i,"value"),!t)return;const n=[],u=[];r.forEach(s=>{s.preTaskCode===t&&u.push({value:s.postTaskCode,label:p[s.postTaskCode]}),s.postTaskCode===t&&s.preTaskCode!==0&&(n.push(s.preTaskCode),this.preTaskOptions.find(o=>o.value===s.preTaskCode)||this.preTaskOptions.push({value:s.preTaskCode,label:p[s.preTaskCode]}))}),this.preTasks=n,this.postTaskOptions=u},updateResource(e){this.resources=e},updateMainJar(e,t){this.mainJars[e]=t},updateName(e){this.name=e},updateDependentResult(e){const t={};for(const[r,a]of Object.entries(e))t[r]=a==="FAILED"?"FAILURE":a;this.dependentResult=t},init(){this.preTaskOptions=[],this.postTaskOptions=[],this.preTasks=[],this.resources=[],this.mainJars={},this.name=""}}});export{c as u};
