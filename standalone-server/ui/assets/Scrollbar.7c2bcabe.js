import{d as xe,w as Ue,n as g,an as _e,a3 as Fe,g as re,f as _,i as de,h as ie,l as Be,m as Ne,a as m,R as Ve,e as Ae,b as Ge,s as qe,t as E,as as Je,T as Se,F as Ke}from"./index.536c7d72.js";import{f as Qe}from"./fade-in.cssr.ef9eaee7.js";import{V as Re}from"./VResizeObserver.0aad584a.js";const Te=xe({render(){var o,l;return(l=(o=this.$slots).default)===null||l===void 0?void 0:l.call(o)}});function le(o){return o.composedPath()[0]}const Ze={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function en(o,l,a){if(o==="mousemoveoutside"){const b=c=>{l.contains(le(c))||a(c)};return{mousemove:b,touchstart:b}}else if(o==="clickoutside"){let b=!1;const c=p=>{b=!l.contains(le(p))},f=p=>{!b||l.contains(le(p))||a(p)};return{mousedown:c,mouseup:f,touchstart:c,touchend:f}}return console.error(`[evtd/create-trap-handler]: name \`${o}\` is invalid. This could be a bug of evtd.`),{}}function He(o,l,a){const b=Ze[o];let c=b.get(l);c===void 0&&b.set(l,c=new WeakMap);let f=c.get(a);return f===void 0&&c.set(a,f=en(o,l,a)),f}function nn(o,l,a,b){if(o==="mousemoveoutside"||o==="clickoutside"){const c=He(o,l,a);return Object.keys(c).forEach(f=>{oe(f,document,c[f],b)}),!0}return!1}function tn(o,l,a,b){if(o==="mousemoveoutside"||o==="clickoutside"){const c=He(o,l,a);return Object.keys(c).forEach(f=>{V(f,document,c[f],b)}),!0}return!1}function on(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const o=new WeakMap,l=new WeakMap;function a(){o.set(this,!0)}function b(){o.set(this,!0),l.set(this,!0)}function c(r,n,s){const d=r[n];return r[n]=function(){return s.apply(r,arguments),d.apply(r,arguments)},r}function f(r,n){r[n]=Event.prototype[n]}const p=new WeakMap,y=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function Y(){var r;return(r=p.get(this))!==null&&r!==void 0?r:null}function L(r,n){y!==void 0&&Object.defineProperty(r,"currentTarget",{configurable:!0,enumerable:!0,get:n!=null?n:y.get})}const M={bubble:{},capture:{}},S={};function A(){const r=function(n){const{type:s,eventPhase:d,bubbles:h}=n,P=le(n);if(d===2)return;const z=d===1?"capture":"bubble";let R=P;const T=[];for(;R===null&&(R=window),T.push(R),R!==window;)R=R.parentNode||null;const W=M.capture[s],D=M.bubble[s];if(c(n,"stopPropagation",a),c(n,"stopImmediatePropagation",b),L(n,Y),z==="capture"){if(W===void 0)return;for(let C=T.length-1;C>=0&&!o.has(n);--C){const X=T[C],j=W.get(X);if(j!==void 0){p.set(n,X);for(const U of j){if(l.has(n))break;U(n)}}if(C===0&&!h&&D!==void 0){const U=D.get(X);if(U!==void 0)for(const ae of U){if(l.has(n))break;ae(n)}}}}else if(z==="bubble"){if(D===void 0)return;for(let C=0;C<T.length&&!o.has(n);++C){const X=T[C],j=D.get(X);if(j!==void 0){p.set(n,X);for(const U of j){if(l.has(n))break;U(n)}}}}f(n,"stopPropagation"),f(n,"stopImmediatePropagation"),L(n)};return r.displayName="evtdUnifiedHandler",r}function G(){const r=function(n){const{type:s,eventPhase:d}=n;if(d!==2)return;const h=S[s];h!==void 0&&h.forEach(P=>P(n))};return r.displayName="evtdUnifiedWindowEventHandler",r}const k=A(),I=G();function q(r,n){const s=M[r];return s[n]===void 0&&(s[n]=new Map,window.addEventListener(n,k,r==="capture")),s[n]}function Z(r){return S[r]===void 0&&(S[r]=new Set,window.addEventListener(r,I)),S[r]}function J(r,n){let s=r.get(n);return s===void 0&&r.set(n,s=new Set),s}function ee(r,n,s,d){const h=M[n][s];if(h!==void 0){const P=h.get(r);if(P!==void 0&&P.has(d))return!0}return!1}function B(r,n){const s=S[r];return!!(s!==void 0&&s.has(n))}function H(r,n,s,d){let h;if(typeof d=="object"&&d.once===!0?h=W=>{ne(r,n,h,d),s(W)}:h=s,nn(r,n,h,d))return;const z=d===!0||typeof d=="object"&&d.capture===!0?"capture":"bubble",R=q(z,r),T=J(R,n);if(T.has(h)||T.add(h),n===window){const W=Z(r);W.has(h)||W.add(h)}}function ne(r,n,s,d){if(tn(r,n,s,d))return;const P=d===!0||typeof d=="object"&&d.capture===!0,z=P?"capture":"bubble",R=q(z,r),T=J(R,n);if(n===window&&!ee(n,P?"bubble":"capture",r,s)&&B(r,s)){const D=S[r];D.delete(s),D.size===0&&(window.removeEventListener(r,I),S[r]=void 0)}T.has(s)&&T.delete(s),T.size===0&&R.delete(n),R.size===0&&(window.removeEventListener(r,k,z==="capture"),M[z][r]=void 0)}return{on:H,off:ne}}const{on:oe,off:V}=on();function vn(o,l){return Ue(o,a=>{a!==void 0&&(l.value=a)}),g(()=>o.value===void 0?l.value:o.value)}const rn=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function ln(){return rn}function an(o){const l={isDeactivated:!1};let a=!1;return _e(()=>{if(l.isDeactivated=!1,!a){a=!0;return}o()}),Fe(()=>{l.isDeactivated=!0,a||(a=!0)}),l}const sn=re("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[_(">",[re("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[_("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),_(">",[re("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),re("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[de("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--n-scrollbar-height);
 `,[_(">",[ie("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),de("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--n-scrollbar-width);
 `,[_(">",[ie("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),de("disabled",[_(">",[ie("scrollbar",{pointerEvents:"none"})])]),_(">",[ie("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[Qe(),_("&:hover",{backgroundColor:"var(--n-scrollbar-color-hover)"})])])])])]),cn=Object.assign(Object.assign({},Be.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),ye=xe({name:"Scrollbar",props:cn,inheritAttrs:!1,setup(o){const{mergedClsPrefixRef:l,inlineThemeDisabled:a}=Ne(o),b=m(null),c=m(null),f=m(null),p=m(null),y=m(null),Y=m(null),L=m(null),M=m(null),S=m(null),A=m(null),G=m(null),k=m(0),I=m(0),q=m(!1),Z=m(!1);let J=!1,ee=!1,B,H,ne=0,r=0,n=0,s=0;const d=ln(),h=g(()=>{const{value:e}=M,{value:t}=Y,{value:i}=A;return e===null||t===null||i===null?0:Math.min(e,i*e/t+o.size*1.5)}),P=g(()=>`${h.value}px`),z=g(()=>{const{value:e}=S,{value:t}=L,{value:i}=G;return e===null||t===null||i===null?0:i*e/t+o.size*1.5}),R=g(()=>`${z.value}px`),T=g(()=>{const{value:e}=M,{value:t}=k,{value:i}=Y,{value:u}=A;if(e===null||i===null||u===null)return 0;{const w=i-e;return w?t/w*(u-h.value):0}}),W=g(()=>`${T.value}px`),D=g(()=>{const{value:e}=S,{value:t}=I,{value:i}=L,{value:u}=G;if(e===null||i===null||u===null)return 0;{const w=i-e;return w?t/w*(u-z.value):0}}),C=g(()=>`${D.value}px`),X=g(()=>{const{value:e}=M,{value:t}=Y;return e!==null&&t!==null&&t>e}),j=g(()=>{const{value:e}=S,{value:t}=L;return e!==null&&t!==null&&t>e}),U=g(()=>{const{trigger:e}=o;return e==="none"||q.value}),ae=g(()=>{const{trigger:e}=o;return e==="none"||Z.value}),F=g(()=>{const{container:e}=o;return e?e():c.value}),Me=g(()=>{const{content:e}=o;return e?e():f.value}),fe=an(()=>{o.container||he({top:k.value,left:I.value})}),Pe=()=>{fe.isDeactivated||N()},ze=e=>{if(fe.isDeactivated)return;const{onResize:t}=o;t&&t(e),N()},he=(e,t)=>{if(!o.scrollable)return;if(typeof e=="number"){K(t!=null?t:0,e,0,!1,"auto");return}const{left:i,top:u,index:w,elSize:x,position:$,behavior:v,el:O,debounce:te=!0}=e;(i!==void 0||u!==void 0)&&K(i!=null?i:0,u!=null?u:0,0,!1,v),O!==void 0?K(0,O.offsetTop,O.offsetHeight,te,v):w!==void 0&&x!==void 0?K(0,w*x,x,te,v):$==="bottom"?K(0,Number.MAX_SAFE_INTEGER,0,!1,v):$==="top"&&K(0,0,0,!1,v)},Ee=(e,t)=>{if(!o.scrollable)return;const{value:i}=F;!i||(typeof e=="object"?i.scrollBy(e):i.scrollBy(e,t||0))};function K(e,t,i,u,w){const{value:x}=F;if(!!x){if(u){const{scrollTop:$,offsetHeight:v}=x;if(t>$){t+i<=$+v||x.scrollTo({left:e,top:t+i-v,behavior:w});return}}x.scrollTo({left:e,top:t,behavior:w})}}function We(){De(),Xe(),N()}function Ce(){se()}function se(){Le(),ke()}function Le(){H!==void 0&&window.clearTimeout(H),H=window.setTimeout(()=>{Z.value=!1},o.duration)}function ke(){B!==void 0&&window.clearTimeout(B),B=window.setTimeout(()=>{q.value=!1},o.duration)}function De(){B!==void 0&&window.clearTimeout(B),q.value=!0}function Xe(){H!==void 0&&window.clearTimeout(H),Z.value=!0}function $e(e){const{onScroll:t}=o;t&&t(e),ve()}function ve(){const{value:e}=F;e&&(k.value=e.scrollTop,I.value=e.scrollLeft)}function Oe(){const{value:e}=Me;e&&(Y.value=e.offsetHeight,L.value=e.offsetWidth);const{value:t}=F;t&&(M.value=t.offsetHeight,S.value=t.offsetWidth);const{value:i}=y,{value:u}=p;i&&(G.value=i.offsetWidth),u&&(A.value=u.offsetHeight)}function be(){const{value:e}=F;e&&(k.value=e.scrollTop,I.value=e.scrollLeft,M.value=e.offsetHeight,S.value=e.offsetWidth,Y.value=e.scrollHeight,L.value=e.scrollWidth);const{value:t}=y,{value:i}=p;t&&(G.value=t.offsetWidth),i&&(A.value=i.offsetHeight)}function N(){!o.scrollable||(o.useUnifiedContainer?be():(Oe(),ve()))}function we(e){var t;return!(!((t=b.value)===null||t===void 0)&&t.contains(e.target))}function Ye(e){e.preventDefault(),e.stopPropagation(),ee=!0,oe("mousemove",window,pe,!0),oe("mouseup",window,ge,!0),r=I.value,n=e.clientX}function pe(e){if(!ee)return;B!==void 0&&window.clearTimeout(B),H!==void 0&&window.clearTimeout(H);const{value:t}=S,{value:i}=L,{value:u}=z;if(t===null||i===null)return;const x=(e.clientX-n)*(i-t)/(t-u),$=i-t;let v=r+x;v=Math.min($,v),v=Math.max(v,0);const{value:O}=F;if(O){O.scrollLeft=v;const{internalOnUpdateScrollLeft:te}=o;te&&te(v)}}function ge(e){e.preventDefault(),e.stopPropagation(),V("mousemove",window,pe,!0),V("mouseup",window,ge,!0),ee=!1,N(),we(e)&&se()}function Ie(e){e.preventDefault(),e.stopPropagation(),J=!0,oe("mousemove",window,ce,!0),oe("mouseup",window,ue,!0),ne=k.value,s=e.clientY}function ce(e){if(!J)return;B!==void 0&&window.clearTimeout(B),H!==void 0&&window.clearTimeout(H);const{value:t}=M,{value:i}=Y,{value:u}=h;if(t===null||i===null)return;const x=(e.clientY-s)*(i-t)/(t-u),$=i-t;let v=ne+x;v=Math.min($,v),v=Math.max(v,0);const{value:O}=F;O&&(O.scrollTop=v)}function ue(e){e.preventDefault(),e.stopPropagation(),V("mousemove",window,ce,!0),V("mouseup",window,ue,!0),J=!1,N(),we(e)&&se()}Ve(()=>{const{value:e}=j,{value:t}=X,{value:i}=l,{value:u}=y,{value:w}=p;u&&(e?u.classList.remove(`${i}-scrollbar-rail--disabled`):u.classList.add(`${i}-scrollbar-rail--disabled`)),w&&(t?w.classList.remove(`${i}-scrollbar-rail--disabled`):w.classList.add(`${i}-scrollbar-rail--disabled`))}),Ae(()=>{o.container||N()}),Ge(()=>{B!==void 0&&window.clearTimeout(B),H!==void 0&&window.clearTimeout(H),V("mousemove",window,ce,!0),V("mouseup",window,ue,!0)});const je=Be("Scrollbar","-scrollbar",sn,Je,o,l),me=g(()=>{const{common:{cubicBezierEaseInOut:e,scrollbarBorderRadius:t,scrollbarHeight:i,scrollbarWidth:u},self:{color:w,colorHover:x}}=je.value;return{"--n-scrollbar-bezier":e,"--n-scrollbar-color":w,"--n-scrollbar-color-hover":x,"--n-scrollbar-border-radius":t,"--n-scrollbar-width":u,"--n-scrollbar-height":i}}),Q=a?qe("scrollbar",void 0,me,o):void 0;return Object.assign(Object.assign({},{scrollTo:he,scrollBy:Ee,sync:N,syncUnifiedContainer:be,handleMouseEnterWrapper:We,handleMouseLeaveWrapper:Ce}),{mergedClsPrefix:l,containerScrollTop:k,wrapperRef:b,containerRef:c,contentRef:f,yRailRef:p,xRailRef:y,needYBar:X,needXBar:j,yBarSizePx:P,xBarSizePx:R,yBarTopPx:W,xBarLeftPx:C,isShowXBar:U,isShowYBar:ae,isIos:d,handleScroll:$e,handleContentResize:Pe,handleContainerResize:ze,handleYScrollMouseDown:Ie,handleXScrollMouseDown:Ye,cssVars:a?void 0:me,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender})},render(){var o;const{$slots:l,mergedClsPrefix:a,triggerDisplayManually:b}=this;if(!this.scrollable)return(o=l.default)===null||o===void 0?void 0:o.call(l);const c=()=>{var f,p;(f=this.onRender)===null||f===void 0||f.call(this);const y=this.trigger==="none";return E("div",Ke(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${a}-scrollbar`,this.themeClass],style:this.cssVars,onMouseenter:b?void 0:this.handleMouseEnterWrapper,onMouseleave:b?void 0:this.handleMouseLeaveWrapper}),[this.container?(p=l.default)===null||p===void 0?void 0:p.call(l):E("div",{role:"none",ref:"containerRef",class:[`${a}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},E(Re,{onResize:this.handleContentResize},{default:()=>E("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${a}-scrollbar-content`,this.contentClass]},l)})),E("div",{ref:"yRailRef",class:`${a}-scrollbar-rail ${a}-scrollbar-rail--vertical`,style:this.verticalRailStyle,"aria-hidden":!0},E(y?Te:Se,y?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?E("div",{class:`${a}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),E("div",{ref:"xRailRef",class:`${a}-scrollbar-rail ${a}-scrollbar-rail--horizontal`,style:this.horizontalRailStyle,"aria-hidden":!0},E(y?Te:Se,y?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?E("div",{class:`${a}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])};return this.container?c():E(Re,{onResize:this.handleContainerResize},{default:c})}}),bn=ye,wn=ye;export{bn as N,Te as W,wn as X,V as a,an as b,oe as o,vn as u};
