import{i as d}from"./index.d67ddc9d.js";import{d as w,a as b,u as p,c as m}from"./index.536c7d72.js";const S={height:{type:[String,Number],default:window.innerHeight-174},width:{type:[String,Number],default:"100%"},seriesData:{type:Array,default:()=>[]},links:{default:()=>[]},labelShow:{type:Boolean,default:!0}},y=w({name:"GraphChart",props:S,setup(l){const a=b(null),{t:r}=p(),s=[{color:"#2D8DF0",name:r("project.workflow.online")},{color:"#f37373",name:r("project.workflow.workflow_offline")},{color:"#ba3e3e",name:r("project.workflow.schedule_offline")}],u=(e,o)=>{switch(!0){case o===0:return 1;case(o===1&&e===0):return 2;case(o===1&&e===1):default:return 0}},i={tooltip:{confine:!0,backgroundColor:"#fff",formatter:e=>{if(!e.data.name)return!1;const{name:o,scheduleStartTime:t,scheduleEndTime:c,crontab:n,workFlowPublishStatus:f,schedulePublishStatus:h}=e.data;return`
            ${r("project.workflow.workflow_name")}\uFF1A${o}<br/>
            ${r("project.workflow.schedule_start_time")}\uFF1A${t}<br/>
            ${r("project.workflow.schedule_end_time")}\uFF1A${c}<br/>
            ${r("project.workflow.crontab_expression")}\uFF1A${n||" - "}<br/>
            ${r("project.workflow.workflow_publish_status")}\uFF1A${f}<br/>
            ${r("project.workflow.schedule_publish_status")}\uFF1A${h}<br/>
          `}},legend:{data:s==null?void 0:s.map(e=>({name:e.name,itemStyle:{color:e.color}}))},series:[{type:"graph",layout:"force",draggable:!0,force:{repulsion:300,edgeLength:200},symbol:"roundRect",symbolSize:70,roam:!0,label:{show:l.labelShow,formatter:e=>{let o="";const t=e.data.name.split("");for(let c=0,n;n=t[c++];)o+=n,c%10||(o+=`
`);return o.length>60?o.slice(0,60)+"...":o}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{fontSize:20},data:l.seriesData.map(e=>{const o=u(Number(e.schedulePublishStatus),Number(e.workFlowPublishStatus)),t={color:""};return o===1?t.color="#f37373":o===2?t.color="#ba3e3e":o===0&&(t.color="#2D8DF0"),{name:e.name,id:e.id,category:o,workFlowPublishStatus:Number(e.workFlowPublishStatus)===0?r("project.workflow.offline"):r("project.workflow.online"),schedulePublishStatus:Number(e.schedulePublishStatus)===0?r("project.workflow.offline"):r("project.workflow.online"),crontab:e.crontab,scheduleStartTime:e.scheduleStartTime?e.scheduleStartTime:"-",scheduleEndTime:e.scheduleEndTime?e.scheduleEndTime:"-",itemStyle:t}}),links:l.links,lineStyle:{opacity:.9,width:2,curveness:0},nodeScaleRatio:0,zoom:1,categories:s}]};return d(a,i),{graphChartRef:a}},render(){const{height:l,width:a}=this;return m("div",{ref:"graphChartRef",style:{height:typeof l=="number"?l+"px":l,width:typeof a=="number"?a+"px":a}},null)}});export{y as default};
