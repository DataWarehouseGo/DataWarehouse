import w from"./detail.2e70bb8b.js";import{C as z}from"./index.67b00418.js";import{bo as k,u as C,t as l,b5 as D,d as b,a as I,at as R,e as A,w as U,ba as j,c as a,ak as L}from"./index.536c7d72.js";import{E as V}from"./EditOutlined.57b65af3.js";import{D as x}from"./DeleteOutlined.0c0bc8fc.js";import{N as M}from"./Tooltip.2dc588a0.js";import{N as y}from"./Button.9dd5ee3c.js";import{N as v}from"./Icon.36d6d904.js";import{N as O}from"./Popconfirm.f3bbced5.js";import{N as u}from"./Space.8c5cfc39.js";import{d as E,a as H}from"./index.6f5ae728.js";import{p as P}from"./common.cc1e0c6c.js";import{f as T}from"./index.9c0cbe29.js";import{S as q}from"./SearchOutlined.b0711796.js";import{N as B}from"./Input.4b8b409e.js";import{N as $,a as F}from"./DataTable.4d10e01f.js";import"./lodash.bce5b897.js";import"./service.4ca56d82.js";import"./index.4d9d5980.js";import"./index.eb38a2cf.js";import"./keysOf.10525521.js";import"./Card.1fac8dc8.js";import"./use-rtl.b3456902.js";import"./resolve-slot.12a336d2.js";import"./index.7a579f81.js";import"./index.8209174c.js";import"./flatten.f4456e1c.js";import"./Scrollbar.7c2bcabe.js";import"./fade-in.cssr.ef9eaee7.js";import"./VResizeObserver.0aad584a.js";import"./fade-in-scale-up.cssr.1167eea7.js";import"./utils.ba7f47bf.js";import"./is-browser.f4bc45cf.js";import"./get-elements-by-json.eedeb8ee.js";import"./Form.b918a62f.js";import"./FormItem.67716b88.js";import"./format-length.a0cbed4d.js";import"./Grid.f7dd02c2.js";import"./get-slot.7f666ba0.js";import"./next-frame-once.e5ee25e8.js";import"./Spin.5bd91cff.js";import"./use-compitable.7f10f89e.js";import"./Radio.8f1c774c.js";import"./RadioGroup.5a44255f.js";import"./index.ebf19dc1.js";import"./Switch.57a995f1.js";import"./InputNumber.1f688029.js";import"./use-locale.31127f4e.js";import"./Add.4fb6bf29.js";import"./Select.eddb521d.js";import"./Selection.2ed26059.js";import"./Popover.374e8a7f.js";import"./Suffix.4fa63b0d.js";import"./Checkbox.9b98fe51.js";import"./TreeSelect.c15d3653.js";import"./SettingOutlined.06d5d07d.js";import"./PauseCircleOutlined.a11f5c7d.js";import"./CloseCircleOutlined.14b6a996.js";import"./CheckCircleOutlined.4f0aee70.js";import"./ArrowDown.e4a7e0d5.js";import"./Dropdown.8c20a4f5.js";import"./ChevronRight.ffdb37b1.js";import"./use-keyboard.3c40c702.js";import"./Ellipsis.b0d6a040.js";import"./Forward.5223a2c3.js";function G(){return{IS_ADMIN:k().getUserInfo.userType==="ADMIN_USER"}}function J(e){const{t}=C();return{getColumns:()=>[{title:"#",key:"index",render:(n,s)=>s+1},{title:t("security.alarm_instance.alarm_instance_name"),key:"instanceName"},{title:t("security.alarm_instance.alarm_plugin_name"),key:"alertPluginName"},{title:t("security.alarm_instance.create_time"),key:"createTime"},{title:t("security.alarm_instance.update_time"),key:"updateTime"},{title:t("security.alarm_instance.operation"),key:"operation",width:150,render:n=>l(u,null,{default:()=>[l(M,null,{trigger:()=>l(y,{circle:!0,type:"info",size:"small",onClick:()=>void e(n,"edit")},{default:()=>l(v,null,{default:()=>l(V)})}),default:()=>t("security.alarm_instance.edit")}),l(M,null,{trigger:()=>l(O,{onPositiveClick:()=>void e(n,"delete"),negativeText:t("security.alarm_instance.cancel"),positiveText:t("security.alarm_instance.confirm")},{trigger:()=>l(y,{circle:!0,type:"error",size:"small"},{default:()=>l(v,null,{default:()=>l(x)})}),default:()=>t("security.alarm_instance.delete_confirm")}),default:()=>t("security.alarm_instance.delete")})]})}]}}function K(){const e=D({page:1,pageSize:10,itemCount:0,searchVal:"",list:[],loading:!1}),t=async()=>{if(e.loading)return;e.loading=!0;const{totalList:i,total:p}=await H({pageNo:e.page,pageSize:e.pageSize,searchVal:e.searchVal});if(e.loading=!1,!i)throw Error();e.list=i.map(o=>(o.createTime=o.createTime?T(P(o.createTime),"yyyy-MM-dd HH:mm:ss"):"",o.updateTime=o.updateTime?T(P(o.updateTime),"yyyy-MM-dd HH:mm:ss"):"",o)),e.itemCount=p},r=()=>{e.list.length===1&&e.page>1&&--e.page,t()};return{data:e,changePage:i=>{e.page=i,t()},changePageSize:i=>{e.page=1,e.pageSize=i,t()},deleteRecord:async i=>{await E(i),r()},updateList:r}}function Q(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!L(e)}const lt=b({name:"alarm-instance-manage",setup(){var g;const{t:e}=C(),t=I(!1),r=I(),n=I(),{IS_ADMIN:s}=G(),{data:c,changePage:i,changePageSize:p,deleteRecord:o,updateList:_}=K(),{getColumns:d}=J((m,S)=>{S==="edit"?(t.value=!0,r.value=m):o(m.id)}),h=()=>{r.value=null,t.value=!0},N=()=>{t.value=!1,r.value={}},f=(g=R())==null?void 0:g.appContext.config.globalProperties.trim;return A(()=>{i(1),n.value=d()}),U(C().locale,()=>{n.value=d()}),{t:e,IS_ADMIN:s,showDetailModal:t,currentRecord:r,columns:n,...j(c),changePage:i,changePageSize:p,onCreate:h,onCloseModal:N,onUpdatedList:_,trim:f}},render(){const{t:e,IS_ADMIN:t,currentRecord:r,showDetailModal:n,columns:s,list:c,page:i,pageSize:p,itemCount:o,loading:_,changePage:d,changePageSize:h,onCreate:N,onUpdatedList:f,onCloseModal:g}=this;return a(u,{vertical:!0},{default:()=>[a(z,null,{default:()=>{let m;return a(u,{justify:"space-between"},{default:()=>[t&&a(y,{onClick:N,type:"primary",size:"small"},Q(m=e("security.alarm_instance.create_alarm_instance"))?m:{default:()=>[m]}),a(u,{justify:"end",wrap:!1},{default:()=>[a(B,{allowInput:this.trim,value:this.searchVal,"onUpdate:value":S=>this.searchVal=S,size:"small",placeholder:`${e("security.alarm_instance.search_input_tips")}`},null),a(y,{type:"primary",size:"small",onClick:f},{default:()=>[a(v,null,{default:()=>[a(q,null,null)]})]})]})]})}}),a(z,{title:e("menu.alarm_instance_manage")},{default:()=>[a(u,{vertical:!0},{default:()=>[a($,{columns:s,data:c,loading:_,striped:!0},null),a(u,{justify:"center"},{default:()=>[a(F,{page:i,"page-size":p,"item-count":o,"show-quick-jumper":!0,"on-update:page":d,"on-update:page-size":h},null)]})]})]}),t&&a(w,{show:n,currentRecord:r,onCancel:g,onUpdate:f},null)]})}});export{lt as default};
