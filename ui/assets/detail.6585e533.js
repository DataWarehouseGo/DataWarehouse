import{g as Ee,F as Le}from"./get-elements-by-json.eedeb8ee.js";import{u as m,bK as Pe,t as Y,a as l,e as H,w as x,n as g,J as ue,R as ee,bu as ce,bq as de,b5 as w,bd as Z,d as Ne,c as Re,A as Me}from"./index.536c7d72.js";import{A as K,a as ie}from"./ArrowUpOutlined.6047a6cd.js";import{N as me}from"./Icon.36d6d904.js";import{q as Ce}from"./index.5b6233e7.js";import{q as Ae}from"./index.5342f370.js";import{q as Oe}from"./index.b34b4239.js";import{u as U}from"./task-node.c5365e5f.js";import"./service.4ca56d82.js";import{l as B}from"./lodash.bce5b897.js";import{T as fe}from"./task-type.8f811883.js";import{q as ye,a as te,b as qe,g as Ie}from"./index.22428b53.js";import{q as De,a as xe,b as Fe}from"./index.ea5b005f.js";import{e as _e,f as se,h as pe}from"./index.ef1910ce.js";import{l as He}from"./index.393f36dd.js";import{a as Ye}from"./index.40581ef3.js";import{t as Ge}from"./common.cc1e0c6c.js";import{N as z}from"./Ellipsis.b0d6a040.js";import{b as Ue,g as Qe,c as X}from"./index.2c10ded7.js";import{g as Ve}from"./index.5b11598a.js";import"./Form.b918a62f.js";import"./FormItem.67716b88.js";import"./Button.9dd5ee3c.js";import"./is-browser.f4bc45cf.js";import"./use-rtl.b3456902.js";import"./resolve-slot.12a336d2.js";import"./format-length.a0cbed4d.js";import"./fade-in.cssr.ef9eaee7.js";import"./keysOf.10525521.js";import"./Grid.f7dd02c2.js";import"./index.7a579f81.js";import"./utils.ba7f47bf.js";import"./VResizeObserver.0aad584a.js";import"./flatten.f4456e1c.js";import"./get-slot.7f666ba0.js";import"./next-frame-once.e5ee25e8.js";import"./Spin.5bd91cff.js";import"./use-compitable.7f10f89e.js";import"./Input.4b8b409e.js";import"./use-locale.31127f4e.js";import"./Scrollbar.7c2bcabe.js";import"./Suffix.4fa63b0d.js";import"./Radio.8f1c774c.js";import"./RadioGroup.5a44255f.js";import"./Space.8c5cfc39.js";import"./index.ebf19dc1.js";import"./DeleteOutlined.0c0bc8fc.js";import"./index.8209174c.js";import"./Switch.57a995f1.js";import"./InputNumber.1f688029.js";import"./Add.4fb6bf29.js";import"./Select.eddb521d.js";import"./fade-in-scale-up.cssr.1167eea7.js";import"./Selection.2ed26059.js";import"./Popover.374e8a7f.js";import"./Checkbox.9b98fe51.js";import"./TreeSelect.c15d3653.js";import"./SettingOutlined.06d5d07d.js";import"./PauseCircleOutlined.a11f5c7d.js";import"./CloseCircleOutlined.14b6a996.js";import"./CheckCircleOutlined.4f0aee70.js";import"./EditOutlined.57b65af3.js";import"./index.9c0cbe29.js";import"./Tooltip.2dc588a0.js";function k(t){const{t:e}=m();return{type:"input",field:"name",class:"input-node-name",name:e(t===1?"project.node.task_name":"project.node.name"),props:{placeholder:e("project.node.name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:e("project.node.name_tips")}}}function E(){const{t}=m(),e=[{label:t("project.node.normal"),value:"YES"},{label:t("project.node.prohibition_execution"),value:"NO"}];return{type:"radio",field:"flag",name:t("project.node.run_flag"),options:e}}function L(){const{t}=m();return{type:"input",field:"description",name:t("project.node.description"),props:{placeholder:t("project.node.description_tips"),rows:2,type:"textarea"}}}function P(){const{t}=m(),e=Pe([{label:"HIGHEST",value:"HIGHEST",icon:K,color:"#ff0000"},{label:"HIGH",value:"HIGH",icon:K,color:"#ff0000"},{label:"MEDIUM",value:"MEDIUM",icon:K,color:"#EA7D24"},{label:"LOW",value:"LOW",icon:ie,color:"#2A8734"},{label:"LOWEST",value:"LOWEST",icon:ie,color:"#2A8734"}]),o=({node:a,option:r})=>Y(a,null,{default:()=>[Y(me,{color:r.color},{default:()=>Y(r.icon)}),Y("span",{style:{"z-index":1}},r.label)]});return{type:"select",field:"taskPriority",name:t("project.node.task_priority"),options:e,validate:{required:!0},props:{renderOption:o},value:"MEDIUM"}}function N(){const{t}=m(),e=l([]),o=l(!1),a=async()=>{if(o.value)return;o.value=!0;const r=await Ce();e.value=r.map(n=>({label:n,value:n})),o.value=!1};return H(()=>{a()}),{type:"select",field:"workerGroup",span:12,name:t("project.node.worker_group"),props:{loading:o},options:e,validate:{trigger:["input","blur"],required:!0,message:t("project.node.worker_group_tips")},value:"default"}}function R(t,e){const{t:o}=m();let a=[];const r=l([]),n=l(!1);let i=!1;const s=async()=>{if(n.value)return;n.value=!0,a=(await Ae()).map(c=>({label:c.name,value:c.code,workerGroups:c.workerGroups})),r.value=a.filter(c=>u(c)),n.value=!1,r.value.length===0?t.environmentCode=null:e&&(t.environmentCode=r.value[0].value)},u=p=>{var c;return!t.workerGroup||!((c=p==null?void 0:p.workerGroups)!=null&&c.length)?!1:p.workerGroups.indexOf(t.workerGroup)!==-1};return x(()=>t.workerGroup,()=>{!t.workerGroup||!i||(r.value=a.filter(p=>u(p)),t.environmentCode=r.value.length===0?null:r.value[0].value)}),H(async()=>{await s(),i=!0}),{type:"select",field:"environmentCode",span:12,name:o("project.node.environment_name"),props:{loading:n,clearable:!0},options:r}}function C(t,e){const{t:o}=m(),a=l([]),r=l(!1),n=g(()=>!t.taskGroupId),i=async()=>{if(r.value)return;r.value=!0;const{totalList:s=[]}=await Oe({pageNo:1,pageSize:2147483647,projectCode:e});a.value=s.map(u=>({label:u.name,value:u.id})),r.value=!1};return H(()=>{i()}),x(()=>t.taskGroupId,s=>{s||(t.taskGroupId=null,t.taskGroupPriority=null)}),[{type:"select",field:"taskGroupId",span:12,name:o("project.node.task_group_name"),props:{loading:r,clearable:!0},options:a},{type:"input-number",field:"taskGroupPriority",name:o("project.node.task_group_queue_priority"),props:{max:Math.pow(10,60)-1,disabled:n},span:12}]}function A(){const{t}=m();return[{type:"input-number",field:"failRetryTimes",name:t("project.node.number_of_failed_retries"),span:12,props:{min:0},slots:{suffix:()=>t("project.node.times")}},{type:"input-number",field:"failRetryInterval",name:t("project.node.failed_retry_interval"),span:12,props:{min:0},slots:{suffix:()=>t("project.node.minute")}}]}function Q(){const{t}=m();return[{type:"input-number",field:"cpuQuota",name:t("project.node.cpu_quota"),span:12,slots:{suffix:()=>"%"},props:{min:-1}},{type:"input-number",field:"memoryMax",name:t("project.node.memory_max"),span:12,slots:{suffix:()=>t("project.node.mb")},props:{min:-1}}]}function I(t){const{t:e}=m();return{type:"input-number",field:"delayTime",name:e("project.node.delay_execution_time"),span:12,props:{min:0},slots:{suffix:()=>e("project.node.minute")},value:t.delayTime||0}}function O(t){const{t:e}=m(),o=g(()=>t.timeoutFlag?12:0),a=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return[{type:"switch",field:"timeoutFlag",name:e("project.node.timeout_alarm"),props:{"on-update:value":r=>{r&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:a,span:o,validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!n.length)return new Error(e("project.node.timeout_strategy_tips"))}}},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:o,props:{max:Math.pow(10,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(n)))return new Error(e("project.node.timeout_period_tips"))}}}]}function M(){const{t}=m(),e=U(),o=l(e.getPreTaskOptions);return x(()=>e.getPreTaskOptions,a=>{o.value=a}),{type:"select",field:"preTasks",span:24,class:"pre-tasks-model",name:t("project.node.pre_tasks"),props:{multiple:!0,filterable:!0},options:o}}function re(t,e){const{t:o}=m(),a=["CONDITIONS","SWITCH"],r=Object.keys(fe).map(n=>({label:n,value:n,disabled:a.includes(n)}));return{type:"select",field:"taskType",span:24,name:o("project.node.task_type"),props:{disabled:e||["CONDITIONS","SWITCH"].includes(t.taskType)},options:r,validate:{trigger:["input","blur"],required:!0,message:o("project.node.task_type_tips")},value:t.taskType?t.taskType:"SHELL"}}function ae({model:t,projectCode:e,isCreate:o,from:a,processName:r,taskCode:n}){const{t:i}=m(),s=U(),u=l([]),p=l(!1),c=async()=>{if(p.value)return;p.value=!0;const T=await ye(e);u.value=T.map(S=>({label:S.name,value:S.code})),p.value=!1},y=async T=>{if(!T)return;const S=await te(T,e);t.definition=S,s.updateDefinition(S,n)},j=T=>{y(T)};return H(()=>{a===1&&r&&y(r),c()}),{type:"select",field:"processName",span:24,name:i("project.node.workflow_name"),props:{loading:p,disabled:!o,"on-update:value":j},validate:{trigger:["input","blur"],required:!0,validator(T,S){if(!S)return new Error(i("project.node.workflow_name_tips"))}},options:u}}function We({model:t,projectCode:e,from:o,processName:a,code:r}){const{t:n}=m(),i=l([]),s=l(!1),u=async()=>{if(s.value)return;s.value=!0;const c=await ye(e);i.value=c.filter(y=>y.code!==r).map(y=>({label:y.name,value:y.code})),s.value=!1},p=async c=>{if(!c)return;const y=await te(c,e);t.definition=y};return H(()=>{o===1&&a&&p(a),u()}),{type:"select",field:"processDefinitionCode",span:24,name:n("project.node.child_node"),props:{loading:s},options:i,class:"select-child-node",validate:{trigger:["input","blur"],required:!0,validator(c,y){if(!y)return Error(n("project.node.child_node_tips"))}}}}function Je(){const{t}=m();return{type:"input",field:"targetJobName",name:t("project.node.target_task_name"),props:{placeholder:t("project.node.target_task_name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:t("project.node.target_task_name_tips")}}}function $(t,e={}){const{t:o}=m(),a=l([]),r=l([]),n=[{id:0,code:"MYSQL",disabled:!1},{id:1,code:"POSTGRESQL",disabled:!1},{id:2,code:"HIVE",disabled:!1},{id:3,code:"SPARK",disabled:!1},{id:4,code:"CLICKHOUSE",disabled:!1},{id:5,code:"ORACLE",disabled:!1},{id:6,code:"SQLSERVER",disabled:!1},{id:7,code:"DB2",disabled:!1},{id:8,code:"PRESTO",disabled:!1},{id:9,code:"REDSHIFT",disabled:!1},{id:10,code:"ATHENA",disabled:!1}],i=async()=>{a.value=n.filter(p=>p.disabled?!1:e.supportedDatasourceType?B.exports.indexOf(e.supportedDatasourceType,p.code)!==-1:!0).map(p=>({label:p.code,value:p.code}))},s=async()=>{const p={type:t[e.typeField||"type"]},c=await _e(p);r.value=c.map(j=>({label:j.name,value:j.id}));const y=e.sourceField||"datasource";!c.length&&t[y]&&(t[y]=null),c.length&&t[y]&&(B.exports.find(c,{id:t[y]})||(t[y]=null))},u=()=>{s()};return H(async()=>{i(),await ue(),s()}),[{type:"select",field:e.typeField||"type",span:e.span||12,name:o("project.node.datasource_type"),props:{"on-update:value":u},options:a,validate:{trigger:["input","blur"],required:!0}},{type:"select",field:e.sourceField||"datasource",span:e.span||12,name:o("project.node.datasource_instances"),options:r,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(!c&&c!==0)return Error(o("project.node.datasource_instances"))}}}]}const W={"field-title":"_field-title_1hhfj_17","relaction-label":"_relaction-label_1hhfj_32","relaction-switch":"_relaction-switch_1hhfj_37","display-rows-tips":"_display-rows-tips_1hhfj_55"};function Be(t){const{t:e}=m(),o=g(()=>t.sqlType==="0"?6:0),a=g(()=>t.sqlType==="1"?18:0),r=g(()=>t.sqlType==="0"&&t.sendEmail?24:0),n=l([]),i=l(!1),s=[{value:"0",label:e("project.node.sql_type_query")},{value:"1",label:e("project.node.sql_type_non_query")}],u=async()=>{if(i.value)return;i.value=!0;const p=await He();n.value=p.map(c=>({label:c.groupName,value:c.id})),i.value=!1};return H(()=>{u()}),[{type:"select",field:"sqlType",span:6,name:e("project.node.sql_type"),options:s,validate:{trigger:["input","blur"],required:!0}},{type:"input",field:"segmentSeparator",name:e("project.node.segment_separator"),props:{placeholder:e("project.node.segment_separator_tips")},span:a},{type:"switch",field:"sendEmail",span:o,name:e("project.node.send_email")},{type:"select",field:"displayRows",span:o,name:e("project.node.log_display"),options:$e,props:{filterable:!0,tag:!0},validate:{trigger:["input","blur"],validator(p,c){if(!/^\+?[1-9][0-9]*$/.test(c))return new Error(e("project.node.integer_tips"))}}},{type:"custom",field:"displayRowsTips",span:o,widget:Y("div",{class:W["display-rows-tips"]},e("project.node.rows_of_result"))},{type:"input",field:"title",name:e("project.node.title"),props:{placeholder:e("project.node.title_tips")},span:r,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.sendEmail&&!c)return new Error(e("project.node.title_tips"))}}},{type:"select",field:"groupId",name:e("project.node.alarm_group"),options:n,span:r,props:{loading:i,placeholder:e("project.node.alarm_group_tips")},validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.sendEmail&&!c)return new Error(e("project.node.alarm_group_tips"))}}}]}const $e=[{label:"1",value:1},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}];function Ke(t){const{t:e}=m();return[{type:"editor",field:"method",name:e("project.node.procedure_method"),props:{language:"sql",placeholder:e("project.node.procedure_method_tips")},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.procedure_method_tips")}},...D({model:t,field:"localParams",isSimple:!1})]}function D({model:t,field:e,isSimple:o,name:a="custom_parameters",span:r=24}){const{t:n}=m();return[{type:"custom-parameters",field:e,name:n(`project.node.${a}`),class:"btn-custom-parameters",span:r,children:[{type:"input",field:"prop",span:6,class:"input-param-key",props:{placeholder:n("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(i,s){if(!s)return new Error(n("project.node.prop_tips"));if(t[e].filter(p=>p.prop===s).length>1)return new Error(n("project.node.prop_repeat"))}}},{type:"select",field:"direct",span:4,options:Xe,value:"IN",props:{disabled:o}},{type:"select",field:"type",span:6,options:ze,value:"VARCHAR",props:{disabled:o}},{type:"input",field:"value",span:6,class:"input-param-value",props:{placeholder:n("project.node.value_tips"),maxLength:256}}]}]}const ze=[{value:"VARCHAR",label:"VARCHAR"},{value:"INTEGER",label:"INTEGER"},{value:"LONG",label:"LONG"},{value:"FLOAT",label:"FLOAT"},{value:"DOUBLE",label:"DOUBLE"},{value:"DATE",label:"DATE"},{value:"TIME",label:"TIME"},{value:"TIMESTAMP",label:"TIMESTAMP"},{value:"BOOLEAN",label:"BOOLEAN"},{value:"LIST",label:"LIST"}],Xe=[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}];function ve(t,e,o,a){const{t:r}=m(),n=l([]),i=l(!1),s=async u=>{if(i.value)return;i.value=!0;const p=await _e({type:u});n.value=p.map(c=>({label:c.name,value:c.id})),i.value=!1};return H(()=>{s("MYSQL")}),[{type:"select",field:o,name:r("project.node.datasource"),span:e,options:[{label:"MYSQL",value:"MYSQL"}],validate:{required:!0}},{type:"select",field:a,name:" ",span:e,props:{placeholder:r("project.node.datasource_tips"),filterable:!0,loading:i},options:n,validate:{trigger:["blur","input"],validator(u,p){if(!p)return new Error(r("project.node.datasource_tips"))}}}]}function Ze(t,e){const{t:o}=m(),a=l(24),r=l(0),n=l(24),i=l(0),s=l(0),u=l(0),p=l(12),c=()=>{a.value=e.value&&t.sourceType==="MYSQL"?24:0,r.value=a.value&&t.srcQueryType==="0"?24:0,n.value=a.value&&t.srcQueryType==="1"?24:0,i.value=r.value&&t.srcColumnType==="1"?24:0,s.value=e.value&&t.sourceType==="HIVE"?24:0,u.value=e.value&&t.sourceType==="HDFS"?24:0,p.value=e.value&&t.sourceType==="MYSQL"?12:0},y=l([{label:"MYSQL",value:"MYSQL"}]),j=T=>{switch(T){case"import":return[{label:"MYSQL",value:"MYSQL"}];case"export":return[{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}];default:return[{label:"MYSQL",value:"MYSQL"},{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}]}};return x(()=>t.modelType,T=>{y.value=j(T),t.sourceType||(t.sourceType=y.value[0].value)}),x(()=>[e.value,t.sourceType,t.srcQueryType,t.srcColumnType],()=>{c()}),[{type:"custom",field:"custom-title-source",span:e,widget:Y("div",{class:W["field-title"]},o("project.node.data_source"))},{type:"select",field:"sourceType",name:o("project.node.type"),span:e,options:y},...ve(t,p,"sourceMysqlType","sourceMysqlDatasource"),{type:"radio",field:"srcQueryType",name:o("project.node.model_type"),span:a,options:[{label:o("project.node.form"),value:"0"},{label:"SQL",value:"1"}],props:{"on-update:value":T=>{t.targetType=T==="0"?"HIVE":"HDFS"}}},{type:"input",field:"srcTable",name:o("project.node.table"),span:r,props:{placeholder:o("project.node.table_tips")},validate:{trigger:["input","blur"],required:!0,validator(T,S){if(r.value&&!S)return new Error(o("project.node.table_tips"))}}},{type:"radio",field:"srcColumnType",name:o("project.node.column_type"),span:r,options:[{label:o("project.node.all_columns"),value:"0"},{label:o("project.node.some_columns"),value:"1"}]},{type:"input",field:"srcColumns",name:o("project.node.column"),span:i,props:{placeholder:o("project.node.column_tips")},validate:{trigger:["input","blur"],required:!0,validator(T,S){if(!!i.value&&!S)return new Error(o("project.node.column_tips"))}}},{type:"input",field:"sourceHiveDatabase",name:o("project.node.database"),span:s,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(T,S){if(s.value&&!S)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"sourceHiveTable",name:o("project.node.table"),span:s,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(T,S){if(s.value&&!S)return new Error(o("project.node.hive_table_tips"))}}},{type:"input",field:"sourceHivePartitionKey",name:o("project.node.hive_partition_keys"),span:s,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"sourceHivePartitionValue",name:o("project.node.hive_partition_values"),span:s,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"sourceHdfsExportDir",name:o("project.node.export_dir"),span:u,props:{placeholder:o("project.node.export_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(T,S){if(u.value&&!S)return new Error(o("project.node.export_dir_tips"))}}},{type:"editor",field:"sourceMysqlSrcQuerySql",name:o("project.node.sql_statement"),span:n,validate:{trigger:["blur","input"],required:!0,validator(T,S){if(n.value&&!S)return new Error(o("project.node.sql_statement_tips"))}}},...D({model:t,field:"mapColumnHive",name:"map_column_hive",isSimple:!0,span:a}),...D({model:t,field:"mapColumnJava",name:"map_column_java",isSimple:!0,span:a})]}function et(t,e){const{t:o}=m(),a=l(0),r=l(24),n=l(0),i=l(0),s=l(0),u=()=>{a.value=e.value&&t.targetType==="HIVE"?24:0,r.value=e.value&&t.targetType==="HDFS"?24:0,n.value=e.value&&t.targetType==="MYSQL"?24:0,i.value=e.value&&t.targetType==="MYSQL"?12:0,s.value=n.value&&t.targetMysqlIsUpdate?24:0},p=l([{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]),c=(y,j)=>{switch(y){case"MYSQL":return j==="1"?[{label:"HDFS",value:"HDFS"}]:[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}];case"HDFS":case"HIVE":return[{label:"MYSQL",value:"MYSQL"}];default:return[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]}};return x(()=>[t.sourceType,t.srcQueryType],([y,j])=>{p.value=c(y,j),t.targetType||(t.targetType=p.value[0].value)}),x(()=>[e.value,t.targetType,t.targetMysqlIsUpdate],()=>{u()}),[{type:"custom",field:"custom-title-target",span:e,widget:Y("div",{class:W["field-title"]},o("project.node.data_target"))},{type:"select",field:"targetType",name:o("project.node.type"),span:e,options:p},{type:"input",field:"targetHiveDatabase",name:o("project.node.database"),span:a,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(y,j){if(a.value&&!j)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"targetHiveTable",name:o("project.node.table"),span:a,props:{placeholder:o("project.node.table")},validate:{trigger:["blur","input"],required:!0,validator(y,j){if(a.value&&!j)return new Error(o("project.node.hive_table_tips"))}}},{type:"switch",field:"targetHiveCreateTable",span:a,name:o("project.node.create_hive_table")},{type:"switch",field:"targetHiveDropDelimiter",span:a,name:o("project.node.drop_delimiter")},{type:"switch",field:"targetHiveOverWrite",span:a,name:o("project.node.over_write_src")},{type:"input",field:"targetHiveTargetDir",name:o("project.node.hive_target_dir"),span:a,props:{placeholder:o("project.node.hive_target_dir_tips")}},{type:"input",field:"targetHiveReplaceDelimiter",name:o("project.node.replace_delimiter"),span:a,props:{placeholder:o("project.node.replace_delimiter_tips")}},{type:"input",field:"targetHivePartitionKey",name:o("project.node.hive_partition_keys"),span:a,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"targetHivePartitionValue",name:o("project.node.hive_partition_values"),span:a,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"targetHdfsTargetPath",name:o("project.node.target_dir"),span:r,props:{placeholder:o("project.node.target_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(y,j){if(r.value&&!j)return new Error(o("project.node.target_dir_tips"))}}},{type:"switch",field:"targetHdfsDeleteTargetDir",name:o("project.node.delete_target_dir"),span:r},{type:"radio",field:"targetHdfsCompressionCodec",name:o("project.node.compression_codec"),span:r,options:tt},{type:"radio",field:"targetHdfsFileType",name:o("project.node.file_type"),span:r,options:rt},{type:"input",field:"targetHdfsFieldsTerminated",name:o("project.node.fields_terminated"),span:r,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetHdfsLinesTerminated",name:o("project.node.lines_terminated"),span:r,props:{placeholder:o("project.node.lines_terminated_tips")}},...ve(t,i,"targetMysqlType","targetMysqlDatasource"),{type:"input",field:"targetMysqlTable",name:o("project.node.table"),span:n,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(y,j){if(n.value&&!j)return new Error(o("project.node.table_tips"))}}},{type:"input",field:"targetMysqlColumns",name:o("project.node.column"),span:n,props:{placeholder:o("project.node.column_tips")}},{type:"input",field:"targetMysqlFieldsTerminated",name:o("project.node.fields_terminated"),span:n,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetMysqlLinesTerminated",name:o("project.node.lines_terminated"),span:n,props:{placeholder:o("project.node.lines_terminated_tips")}},{type:"switch",field:"targetMysqlIsUpdate",span:n,name:o("project.node.is_update")},{type:"input",field:"targetMysqlTargetUpdateKey",name:o("project.node.update_key"),span:s,props:{placeholder:o("project.node.update_key_tips")}},{type:"radio",field:"targetMysqlUpdateMode",name:o("project.node.update_mode"),span:s,options:[{label:o("project.node.only_update"),value:"updateonly"},{label:o("project.node.allow_insert"),value:"allowinsert"}]}]}const tt=[{label:"snappy",value:"snappy"},{label:"lzo",value:"lzo"},{label:"gzip",value:"gzip"},{label:"no",value:""}],rt=[{label:"avro",value:"--as-avrodatafile"},{label:"sequence",value:"--as-sequencefile"},{label:"text",value:"--as-textfile"},{label:"parquet",value:"--as-parquetfile"}];function ge({model:t,children:e,childrenField:o,name:a}){const{t:r}=m(),n=g(()=>t.dependTaskList.length?3:0);return ee(()=>{t.dependTaskList.forEach((i,s)=>{i[o].length===0&&t.dependTaskList.splice(s,1)})}),[{type:"custom",name:r(`project.node.${a}`),field:"relationLabel",span:24,class:W["relaction-label"]},{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:n,class:W["relaction-switch"]},{type:"custom-parameters",field:"dependTaskList",span:20,children:[{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:4,value:"AND",class:W["relaction-switch"]},e]}]}function at(t){const{t:e}=m(),o=g(()=>t.timeoutShowFlag?24:0),a=g(()=>t.timeoutFlag&&t.timeoutShowFlag?12:0),r=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return x(()=>t.timeoutFlag,n=>{t.timeoutShowFlag=n}),[{type:"switch",field:"timeoutShowFlag",name:e("project.node.timeout_alarm")},{type:"switch",field:"timeoutFlag",name:e("project.node.waiting_dependent_complete"),props:{"on-update:value":n=>{n&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}},span:o},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:a,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(n,i){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(i)))return new Error(e("project.node.timeout_period_tips"))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:r,span:a,validate:{trigger:["input"],validator(n,i){if(t.waitCompleteTimeoutEnable&&!i.length)return new Error(e("project.node.timeout_strategy_tips"))}}}]}function ot(t,e){const{t:o}=m(),a=l([]),r=l(!1),n=l([]),i=l([]),s=l([]),u=l([]),p=l([]),c=l([]),y=l([]),j=g(()=>t.comparison_type===1?24:0);let T=0;const S=async()=>{if(r.value)return;r.value=!0;const f=await Ue();a.value=f.map(d=>{let b="";return d.name&&(b=d.name.replace("$t(","").replace(")","")),{value:d.id,label:b?o(`project.node.${b}`):""}}),r.value=!1},J=async f=>{if(r.value)return;r.value=!0;const d=await Qe(f),b=JSON.parse(d).map(h=>_(h));e(b,T),T=b.length,r.value=!1},_=f=>{var h;const d={field:f.field,options:f.options,validate:f.validate,props:f.props,value:f.value},b=(h=f.name)==null?void 0:h.replace("$t(","").replace(")","");return d.name=b?o(`project.node.${b}`):"",f.type!=="group"?d.type=f.type:(d.type="custom-parameters",d.children=d.props.rules.map(F=>(F.span=Math.floor(22/d.props.rules.length),F)),t[d.field]=t[d.field]||[],delete d.props.rules),f.emit&&f.emit.forEach(F=>{F==="change"&&(d.props.onUpdateValue=V=>{v(V,d.field,!0)})}),f.props.placeholder&&(d.props.placeholder=o("project.node."+f.props.placeholder.split(" ").join("_").split(",").join("").toLowerCase())),d.field==="src_datasource_id"&&(d.options=n),d.field==="target_datasource_id"&&(d.options=u),d.field==="writer_datasource_id"&&(d.options=y),d.field==="src_table"&&(d.options=i),d.field==="target_table"&&(d.options=p),d.field==="src_field"&&(d.options=s),d.field==="target_field"&&(d.options=c),t[d.field]!==void 0&&(v(t[d.field],d.field,!1),d.value=t[d.field]),d},v=async(f,d,b)=>{if(d==="src_connector_type"&&typeof f=="number"){const h=await X(f);n.value=h||[],b&&(i.value=[],t.src_datasource_id=null,t.src_table=null,t.src_field=null);return}if(d==="target_connector_type"&&typeof f=="number"){const h=await X(f);u.value=h||[],b&&(p.value=[],t.target_datasource_id=null,t.target_table=null,t.target_field=null);return}if(d==="writer_connector_type"&&typeof f=="number"){const h=await X(f);y.value=h||[],b&&(t.writer_datasource_id=null);return}if(d==="src_datasource_id"&&typeof f=="number"){const h=await se(f);i.value=h||[],b&&(t.src_table=null,t.src_field=null)}if(d==="target_datasource_id"&&typeof f=="number"){const h=await se(f);p.value=h||[],b&&(t.target_table=null,t.target_field=null)}if(d==="src_table"&&typeof f=="string"){const h=await pe(t.src_datasource_id,f);s.value=h||[],b&&(t.src_field=null)}if(d==="target_table"&&typeof f=="string"){const h=await pe(t.target_datasource_id,f);c.value=h||[],b&&(t.target_field=null)}};return H(async()=>{await S(),await J(t.ruleId)}),[{type:"select",field:"ruleId",name:o("project.node.rule_name"),props:{loading:r,onUpdateValue:J},options:a},{type:"input",field:"comparison_name",name:o("project.node.fix_value"),props:{placeholder:o("project.node.fix_value")},span:j}]}function oe(t=24,e=l(!0),o=l(!0)){const{t:a}=m(),r=l(le);return ee(()=>{r.value=le.filter(n=>{switch(n.value){case"cluster":return o.value;case"client":return e.value;default:return!0}})}),{type:"radio",field:"deployMode",name:a("project.node.deploy_mode"),options:r,span:t}}const le=[{label:"cluster",value:"cluster"},{label:"client",value:"client"},{label:"local",value:"local"}];function je(){const{t}=m();return{type:"input-number",field:"driverCores",name:t("project.node.driver_cores"),span:12,props:{placeholder:t("project.node.driver_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_cores_tips"))}}}}function Te(){const{t}=m();return{type:"input",field:"driverMemory",name:t("project.node.driver_memory"),span:12,props:{placeholder:t("project.node.driver_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.driver_memory")+t("project.node.positive_integer_tips"))}}}}function be(){const{t}=m();return{type:"input-number",field:"numExecutors",name:t("project.node.executor_number"),span:12,props:{placeholder:t("project.node.executor_number_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_number_tips"))}}}}function he(){const{t}=m();return{type:"input",field:"executorMemory",name:t("project.node.executor_memory"),span:12,props:{placeholder:t("project.node.executor_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.executor_memory_tips")+t("project.node.positive_integer_tips"))}}}}function Se(){const{t}=m();return{type:"input-number",field:"executorCores",name:t("project.node.executor_cores"),span:12,props:{placeholder:t("project.node.executor_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_cores_tips"))}}}}function ne(t){const{t:e}=m(),o=l([]),a=U(),r=g(()=>t.programType==="SQL"?0:24),n=async i=>{const s=a.getMainJar(i);if(s){o.value=s;return}const u=await De({type:"FILE",programType:i});ce.removeUselessChildren(u),o.value=u||[],a.updateMainJar(i,u)};return H(()=>{n(t.programType)}),x(()=>t.programType,i=>{i!=="SQL"&&n(i)}),{type:"tree-select",field:"mainJar",name:e("project.node.main_package"),span:r,props:{cascade:!0,showPath:!0,checkStrategy:"child",placeholder:e("project.node.main_package_tips"),keyField:"id",labelField:"fullName"},validate:{trigger:["input","blur"],required:t.programType!=="SQL",validator(i,s){if(!s&&t.programType!=="SQL")return new Error(e("project.node.main_package_tips"))}},options:o}}function G(t=24,e=!1,o=-1){const{t:a}=m(),r=l([]),n=l(!1),i=U(),s=async()=>{if(i.resources.length){r.value=i.resources;return}if(n.value)return;n.value=!0;const u=await xe({type:"FILE"});ce.removeUselessChildren(u),r.value=u||[],n.value=!1,i.updateResource(u)};return H(()=>{s()}),{type:"tree-select",field:"resourceList",name:a("project.node.resources"),span:t,options:r,props:{multiple:!0,checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:a("project.node.resources_tips"),keyField:"id",labelField:"name",loading:n},validate:{trigger:["input","blur"],required:e,validator(u,p){if(e){if(!p)return new Error(a("project.node.resources_tips"));if(o>0&&p.length>o)return new Error(a("project.node.resources_limit_tips")+o)}}}}}const q=({projectCode:t,from:e=0,readonly:o,data:a,model:r})=>e===0?[]:[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName,taskCode:a==null?void 0:a.code})];function we(t){const{t:e}=m();return[{type:"editor",field:"rawScript",name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}function nt(t){const{t:e}=m(),o=g(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=g(()=>t.programType==="SQL"?0:24),r=g(()=>t.programType==="SQL"?24:0),n=g(()=>t.programType!=="SQL");return[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:it,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"select",field:"sparkVersion",span:12,name:e("project.node.spark_version"),options:st},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(i,s){if(t.programType!=="PYTHON"&&!s&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},oe(24,l(!0),n),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},je(),Te(),be(),he(),Se(),{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const it=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],st=[{label:"SPARK2",value:"SPARK2"},{label:"SPARK1",value:"SPARK1"}];function pt(t){const{t:e}=m(),o=g(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24);return[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:lt,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}},value:t.programType},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON",validator(a,r){if(t.programType!=="PYTHON"&&!r)return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},{type:"input",field:"mainArgs",name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!0})]}const lt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"}];function ke(t){const{t:e}=m(),o=g(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=g(()=>t.programType==="SQL"?0:24),r=g(()=>t.programType==="SQL"?24:0),n=g(()=>t.programType==="SQL"?[{label:">=1.13",value:">=1.13"}]:ct),i=g(()=>t.flinkVersion==="<1.10"&&t.deployMode!=="local"?12:0),s=g(()=>t.deployMode!=="local"?12:0),u=g(()=>t.deployMode!=="local"?24:0),p=g(()=>t.programType==="SQL"?[{label:"per-job/cluster",value:"cluster"},{label:"local",value:"local"}]:t.flinkVersion==="<1.10"?[{label:"cluster",value:"cluster"},{label:"local",value:"local"}]:[{label:"per-job/cluster",value:"cluster"},{label:"application",value:"application"},{label:"local",value:"local"}]);return x(()=>t.flinkVersion,()=>{t.flinkVersion==="<1.10"&&t.deployMode==="application"&&(t.deployMode="cluster")}),ee(()=>{t.flinkVersion=t.programType==="SQL"?">=1.13":t.flinkVersion}),[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:ut,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(c,y){if(t.programType!=="PYTHON"&&!y&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ne(t),{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:p,span:24},{type:"editor",field:"initScript",span:r,name:e("project.node.init_script"),validate:{trigger:["input","trigger"],required:!1,message:e("project.node.init_script_tips")}},{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},{type:"select",field:"flinkVersion",name:e("project.node.flink_version"),options:n,value:t.flinkVersion,span:s},{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")},span:u},{type:"input",field:"jobManagerMemory",name:e("project.node.job_manager_memory"),span:s,props:{placeholder:e("project.node.job_manager_memory_tips"),min:1},validate:{trigger:["input","blur"],validator(c,y){if(!!y&&!Number.isInteger(parseInt(y)))return new Error(e("project.node.job_manager_memory_tips")+e("project.node.positive_integer_tips"))}}},{type:"input",field:"taskManagerMemory",name:e("project.node.task_manager_memory"),span:s,props:{placeholder:e("project.node.task_manager_memory_tips")},validate:{trigger:["input","blur"],validator(c,y){if(!!y&&!Number.isInteger(parseInt(y)))return new Error(e("project.node.task_manager_memory")+e("project.node.positive_integer_tips"))}},value:t.taskManagerMemory},{type:"input-number",field:"slot",name:e("project.node.slot_number"),span:s,props:{placeholder:e("project.node.slot_number_tips"),min:1},value:t.slot},{type:"input-number",field:"taskManager",name:e("project.node.task_manager_number"),span:i,props:{placeholder:e("project.node.task_manager_number_tips"),min:1},value:t.taskManager},{type:"input-number",field:"parallelism",name:e("project.node.parallelism"),span:12,props:{placeholder:e("project.node.parallelism_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(c,y){if(!y)return new Error(e("project.node.parallelism_tips"))}},value:t.parallelism},{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},G(),...D({model:t,field:"localParams",isSimple:!0})]}const ut=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],ct=[{label:"<1.10",value:"<1.10"},{label:"1.11",value:"1.11"},{label:">=1.12",value:">=1.12"}];function dt(t){const{t:e}=m(),o=[{label:e("project.node.status_code_default"),value:"STATUS_CODE_DEFAULT"},{label:e("project.node.status_code_custom"),value:"STATUS_CODE_CUSTOM"},{label:e("project.node.body_contains"),value:"BODY_CONTAINS"},{label:e("project.node.body_not_contains"),value:"BODY_NOT_CONTAINS"}];return[{type:"input",field:"url",name:e("project.node.http_url"),props:{placeholder:e("project.node.http_url_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.http_url_tips"));if(r.search(new RegExp(/http[s]{0,1}:\/\/\S*/,"i")))return new Error(e("project.node.http_url_validator"))}}},{type:"select",field:"httpMethod",span:12,name:e("project.node.http_method"),options:mt},{type:"custom-parameters",field:"httpParams",name:e("project.node.http_parameters"),children:[{type:"input",field:"prop",span:6,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.prop_tips"));if(t.httpParams.filter(i=>i.prop===r).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"select",field:"httpParametersType",span:6,options:ft,value:"PARAMETER"},{type:"input",field:"value",span:6,props:{placeholder:e("project.node.value_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.value_required_tips"))}}}]},{type:"select",field:"httpCheckCondition",name:e("project.node.http_check_condition"),options:o},{type:"input",field:"condition",name:e("project.node.http_condition"),props:{type:"textarea",placeholder:e("project.node.http_condition_tips")}},{type:"input-number",field:"connectTimeout",name:e("project.node.connect_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.connect_timeout")+e("project.node.positive_integer_tips"))}}},{type:"input-number",field:"socketTimeout",name:e("project.node.socket_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.socket_timeout")+e("project.node.positive_integer_tips"))}}},...D({model:t,field:"localParams",isSimple:!0})]}const mt=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"HEAD",label:"HEAD"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],ft=[{value:"PARAMETER",label:"Parameter"},{value:"BODY",label:"Body"},{value:"HEADERS",label:"Headers"}];function yt(t){const{t:e}=m(),o=l([]),a=l(!1),r=g(()=>["HIVE","SPARK"].includes(t.type)?24:0),n=async()=>{if(a.value)return;a.value=!0;const i=await Fe({type:t.type});o.value=i.map(s=>({value:String(s.id),label:s.funcName})),a.value=!1};return x(()=>t.type,i=>{["HIVE","SPARK"].includes(i)&&n()}),{type:"select",field:"udfs",options:o,name:e("project.node.udf_function"),props:{multiple:!0,loading:a},span:r}}function _t(t){const{t:e}=m(),o=g(()=>t.type==="HIVE"?24:0);return[{type:"input",field:"connParams",name:e("project.node.sql_parameter"),props:{placeholder:e("project.node.format_tips")+" key1=value1;key2=value2..."},span:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")},props:{language:"sql"}},yt(t),...D({model:t,field:"localParams",isSimple:!1}),{type:"multi-input",field:"preStatements",name:e("project.node.pre_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.post_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}}]}function vt(t){const{t:e}=m(),o=g(()=>t.isCustomTask?24:0),a=g(()=>t.isCustomTask?0:24),r=g(()=>t.isCustomTask?0:12);return[{type:"switch",field:"isCustomTask",name:e("project.node.custom_job")},{type:"input",field:"jobName",name:e("project.node.sqoop_job_name"),span:a,props:{placeholder:e("project.node.sqoop_job_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!t.isCustomTask&&!i)return new Error(e("project.node.sqoop_job_name_tips"))}}},{type:"select",field:"modelType",name:e("project.node.direct"),span:a,options:gt},...D({model:t,field:"hadoopCustomParams",name:"hadoop_custom_params",isSimple:!0,span:a}),...D({model:t,field:"sqoopAdvancedParams",name:"sqoop_advanced_parameters",isSimple:!0,span:a}),...Ze(t,a),...et(t,a),{type:"input-number",field:"concurrency",name:e("project.node.concurrency"),span:r,props:{placeholder:e("project.node.concurrency_tips"),min:1}},{type:"input",field:"splitBy",name:e("project.node.concurrency_column"),span:r,props:{placeholder:e("project.node.concurrency_column_tips")}},{type:"editor",field:"customShell",name:e("project.node.custom_script"),span:o,validate:{trigger:["input","trigger"],required:!0,validator(n,i){if(o.value&&!i)return new Error(e("project.node.custom_script"))}}},...D({model:t,field:"localParams",name:"custom_parameters",isSimple:!0})]}const gt=[{label:"import",value:"import"},{label:"export",value:"export"}];function jt(t){const{t:e}=m(),o=g(()=>t.useCustom?24:0),a=g(()=>t.useCustom?0:24),r=g(()=>t.engine==="FLINK"?24:0),n=g(()=>t.engine==="SPARK"?24:0),i=g(()=>t.engine==="SPARK"&&t.deployMode!=="local"?12:0),s=g(()=>t.engine==="SPARK"&&t.deployMode!=="local"&&(t.master==="SPARK"||t.master==="MESOS")?12:0);return[{type:"select",field:"engine",span:12,name:e("project.node.engine"),options:Tt,validate:{trigger:["input","blur"],required:!0,message:e("project.node.engine_tips")}},{type:"select",field:"runMode",name:e("project.node.run_mode"),options:bt,value:t.runMode,span:r},{type:"input",field:"others",name:e("project.node.option_parameters"),span:r,props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},oe(n),{type:"select",field:"master",name:e("project.node.sea_tunnel_master"),options:ht,value:t.master,span:i},{type:"input",field:"masterUrl",name:e("project.node.sea_tunnel_master_url"),value:t.masterUrl,span:s,props:{placeholder:e("project.node.sea_tunnel_master_url_tips")},validate:{trigger:["input","blur"],required:s.value!==0,validator(u,p){if(s.value!==0&&!p)return new Error(e("project.node.sea_tunnel_master_url_tips"))}}},{type:"switch",field:"useCustom",name:e("project.node.custom_config")},{type:"editor",field:"rawScript",name:e("project.node.script"),span:o,validate:{trigger:["input","trigger"],required:t.useCustom,validator(u,p){if(t.useCustom&&!p)return new Error(e("project.node.script_tips"))}}},G(a,!0,1),...D({model:t,field:"localParams",isSimple:!0})]}const Tt=[{label:"SPARK",value:"SPARK"},{label:"FLINK",value:"FLINK"}],bt=[{label:"run",value:"RUN"},{label:"run-application",value:"RUN_APPLICATION"}],ht=[{label:"yarn",value:"YARN"},{label:"local",value:"LOCAL"},{label:"spark://",value:"SPARK"},{label:"mesos://",value:"MESOS"}];function St(t,e){const{t:o}=m(),a=U(),r=l(a.postTaskOptions),n=l(!1),i=async()=>{if(n.value)return;n.value=!0,r.value=[];const u=await te(t.processName,e);u==null||u.taskDefinitionList.forEach(p=>{p.code!=t.code&&r.value.push({label:p.name,value:p.code})}),n.value=!1,s(r.value)},s=u=>{var p,c;if(!u||!u.length){t.nextNode=null,(p=t.dependTaskList)==null||p.forEach(y=>{y.nextNode=null});return}B.exports.findIndex(r.value,y=>y.value==t.nextNode)===-1&&(t.nextNode=null),(c=t.dependTaskList)==null||c.forEach(y=>{B.exports.findIndex(r.value,j=>j.value==y.nextNode)===-1&&(y.nextNode=null)})};return x(()=>[t.processName,t.nextCode],()=>{t.processName&&i()}),H(async()=>{await ue(),s(r.value)}),[{type:"custom-parameters",field:"dependTaskList",name:o("project.node.switch_condition"),children:[{type:"input",field:"condition",span:24,props:{loading:n,type:"textarea",autosize:{minRows:2}}},{type:"select",field:"nextNode",span:22,name:o("project.node.switch_branch_flow"),options:r}]},{type:"select",field:"nextNode",span:24,name:o("project.node.switch_branch_flow"),props:{loading:n},options:r}]}function wt(t){const{t:e}=m(),o=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"1KB",value:1024},{label:"10KB",value:10240},{label:"50KB",value:51200},{label:"100KB",value:102400},{label:"512KB",value:524288}],a=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"500",value:500},{label:"1000",value:1e3},{label:"1500",value:1500},{label:"2000",value:2e3},{label:"2500",value:2500},{label:"3000",value:3e3}],r=[{label:"1G",value:1},{label:"2G",value:2},{label:"3G",value:3},{label:"4G",value:4}],n=l(24),i=l(0),s=l(12),u=l(8),p=l(22),c=l(12),y=l(0),j=l(0),T=()=>{t.customConfig?(n.value=0,i.value=24,s.value=0,u.value=0,p.value=0,c.value=0,y.value=24,j.value=24):(n.value=24,i.value=0,s.value=12,u.value=8,p.value=22,c.value=12,y.value=0,j.value=0)},S=["MYSQL","POSTGRESQL","ORACLE","SQLSERVER","CLICKHOUSE","HIVE"];return H(()=>{T()}),x(()=>t.customConfig,()=>{T()}),[{type:"switch",field:"customConfig",name:e("project.node.datax_custom_template")},...$(t,{typeField:"dsType",sourceField:"dataSource",span:s,supportedDatasourceType:S}),{type:"editor",field:"sql",name:e("project.node.sql_statement"),span:n,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"editor",field:"json",name:e("project.node.datax_json_template"),span:i,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},G(j),...$(t,{typeField:"dtType",sourceField:"dataTarget",span:u,supportedDatasourceType:S}),{type:"input",field:"targetTable",name:e("project.node.datax_target_table"),span:u,props:{placeholder:e("project.node.datax_target_table_tips")},validate:{trigger:["input","blur"],required:!0}},{type:"multi-input",field:"preStatements",name:e("project.node.datax_target_database_pre_sql"),span:p,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.datax_target_database_post_sql"),span:p,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"select",field:"jobSpeedByte",name:e("project.node.datax_job_speed_byte"),span:c,options:o,value:0},{type:"select",field:"jobSpeedRecord",name:e("project.node.datax_job_speed_record"),span:c,options:a,value:1e3},{type:"custom-parameters",field:"localParams",name:e("project.node.custom_parameters"),span:y,children:[{type:"input",field:"prop",span:10,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(J,_){if(!_)return new Error(e("project.node.prop_tips"));if(t.localParams.filter(f=>f.prop===_).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:e("project.node.value_tips"),maxLength:256}}]},{type:"select",field:"xms",name:e("project.node.datax_job_runtime_memory_xms"),span:12,options:r,value:1},{type:"select",field:"xmx",name:e("project.node.datax_job_runtime_memory_xmx"),span:12,options:r,value:1},...D({model:t,field:"localParams",isSimple:!0})]}function kt(t){const{t:e}=m(),o=U(),a=o.preTaskOptions.filter(n=>o.preTasks.includes(Number(n.value))),r=[{label:e("project.node.success"),value:"success"},{label:e("project.node.failed"),value:"failed"}];return[{type:"select",field:"successNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"successBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,i)=>{if(i&&i===t.failedBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},{type:"select",field:"failedNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"failedBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,i)=>{if(i&&i===t.successBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},...O(t),...ge({model:t,children:{type:"custom-parameters",field:"dependItemList",span:18,children:[{type:"select",field:"depTaskCode",span:10,options:a},{type:"select",field:"status",span:10,options:[{value:"SUCCESS",label:e("project.node.success")},{value:"FAILURE",label:e("project.node.failed")}]}]},childrenField:"dependItemList",name:"add_pre_task_check_condition"})]}function Et(t){const{t:e}=m(),o=de(),r=U().getDependentResult,n=Ge(e),i=l([]),s={},u={},p=l([]),c=[{value:"month",label:e("project.node.month")},{value:"week",label:e("project.node.week")},{value:"day",label:e("project.node.day")},{value:"hour",label:e("project.node.hour")}],y={hour:[{value:"currentHour",label:e("project.node.current_hour")},{value:"last1Hour",label:e("project.node.last_1_hour")},{value:"last2Hours",label:e("project.node.last_2_hour")},{value:"last3Hours",label:e("project.node.last_3_hour")},{value:"last24Hours",label:e("project.node.last_24_hour")}],day:[{value:"today",label:e("project.node.today")},{value:"last1Days",label:e("project.node.last_1_days")},{value:"last2Days",label:e("project.node.last_2_days")},{value:"last3Days",label:e("project.node.last_3_days")},{value:"last7Days",label:e("project.node.last_7_days")}],week:[{value:"thisWeek",label:e("project.node.this_week")},{value:"lastWeek",label:e("project.node.last_week")},{value:"lastMonday",label:e("project.node.last_monday")},{value:"lastTuesday",label:e("project.node.last_tuesday")},{value:"lastWednesday",label:e("project.node.last_wednesday")},{value:"lastThursday",label:e("project.node.last_thursday")},{value:"lastFriday",label:e("project.node.last_friday")},{value:"lastSaturday",label:e("project.node.last_saturday")},{value:"lastSunday",label:e("project.node.last_sunday")}],month:[{value:"thisMonth",label:e("project.node.this_month")},{value:"thisMonthBegin",label:e("project.node.this_month_begin")},{value:"lastMonth",label:e("project.node.last_month")},{value:"lastMonthBegin",label:e("project.node.last_month_begin")},{value:"lastMonthEnd",label:e("project.node.last_month_end")}]},j=async()=>{const _=await Ye();return i.value=_.map(v=>({value:v.code,label:()=>Y(z,null,v.name)})),i},T=async _=>{if(s[_])return s[_];const f=(await qe(_)).map(d=>({value:d.code,label:()=>Y(z,null,d.name)}));return s[_]=f,f},S=async(_,v)=>{if(u[v])return u[v];const d=(await Ie(_,v)).map(b=>({value:b.code,label:()=>Y(z,null,b.name)}));return d.unshift({value:0,label:"ALL"}),u[v]=d,d},J=_=>{if(!_||o.currentRoute.value.name!=="workflow-instance-detail")return null;const v=`${_.definitionCode}-${_.depTaskCode}-${_.cycle}-${_.dateValue}`,f=r[v];return Y(me,{size:24,color:n[f].color},()=>Y(n[f].icon))};return H(()=>{j()}),x(()=>t.dependTaskList,_=>{p.value=[],_.forEach((v,f)=>{var b,h;if(!((b=v.dependItemList)!=null&&b.length))return;const d=l([]);(h=v.dependItemList)==null||h.forEach(async(F,V)=>{d.value[V]={},F.projectCode&&(d.value[V].definitionCodeOptions=await T(F.projectCode)),F.projectCode&&F.definitionCode&&(d.value[V].depTaskCodeOptions=await S(F.projectCode,F.definitionCode)),F.cycle&&(d.value[V].dateOptions=y[F.cycle])}),p.value[f]={},p.value[f].dependItemList=d.value})}),[...at(t),...ge({model:t,children:(_=0)=>({type:"custom-parameters",field:"dependItemList",span:18,children:[(v=0)=>({type:"select",field:"projectCode",name:e("project.node.project_name"),span:24,props:{filterable:!0,onUpdateValue:async f=>{const d=t.dependTaskList[_].dependItemList[v],b=(p==null?void 0:p.value[_])||{},h=(b==null?void 0:b.dependItemList)||[],F={};F.definitionCodeOptions=await T(f),h[v]=F,b.dependItemList=h,p.value[_]=b,d.depTaskCode=null,d.definitionCode=null}},options:i,path:`dependTaskList.${_}.dependItemList.${v}.projectCode`,rule:{required:!0,trigger:["input","blur"],validator(f,d){if(!d)return Error(e("project.node.project_name_tips"))}}}),(v=0)=>{var f,d;return{type:"select",field:"definitionCode",span:24,name:e("project.node.process_name"),props:{filterable:!0,onUpdateValue:async b=>{const h=t.dependTaskList[_].dependItemList[v];p.value[_].dependItemList[v].depTaskCodeOptions=await S(h.projectCode,b),h.depTaskCode=0}},options:((d=(f=p.value[_])==null?void 0:f.dependItemList[v])==null?void 0:d.definitionCodeOptions)||[],path:`dependTaskList.${_}.dependItemList.${v}.definitionCode`,rule:{required:!0,trigger:["input","blur"],validator(b,h){if(!h)return Error(e("project.node.process_name_tips"))}}}},(v=0)=>{var f,d;return{type:"select",field:"depTaskCode",span:24,name:e("project.node.task_name"),props:{filterable:!0},options:((d=(f=p.value[_])==null?void 0:f.dependItemList[v])==null?void 0:d.depTaskCodeOptions)||[],path:`dependTaskList.${_}.dependItemList.${v}.depTaskCode`,rule:{required:!0,trigger:["input","blur"],validator(b,h){if(!h&&h!==0)return Error(e("project.node.task_name_tips"))}}}},(v=0)=>({type:"select",field:"cycle",span:10,name:e("project.node.cycle_time"),props:{onUpdateValue:f=>{p.value[_].dependItemList[v].dateOptions=y[f],t.dependTaskList[_].dependItemList[v].dateValue=null}},options:c,path:`dependTaskList.${_}.dependItemList.${v}.cycle`,rule:{required:!0,trigger:["input","blur"],validator(f,d){if(!d)return Error(e("project.node.cycle_time_tips"))}}}),(v=0)=>{var f,d;return{type:"select",field:"dateValue",span:10,name:" ",options:((d=(f=p.value[_])==null?void 0:f.dependItemList[v])==null?void 0:d.dateOptions)||[],path:`dependTaskList.${_}.dependItemList.${v}.dateValue`,rule:{trigger:["input","blur"],validator(b,h){if(!h)return Error(e("project.node.date_tips"))}}}},(v=0)=>{var f;return{type:"custom",field:"state",span:2,name:" ",widget:J((f=t.dependTaskList[_])==null?void 0:f.dependItemList[v])}}]}),childrenField:"dependItemList",name:"add_dependency"})]}function Lt(t){const{t:e}=m(),o=g(()=>t.programType==="RUN_JOB_FLOW"?24:0),a=g(()=>t.programType==="ADD_JOB_FLOW_STEPS"?24:0);return[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:Pt,validate:{required:!0}},{type:"editor",field:"jobFlowDefineJson",span:o,name:e("project.node.emr_flow_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_flow_define_json_tips")}},{type:"editor",field:"stepsDefineJson",span:a,name:e("project.node.emr_steps_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_steps_define_json_tips")}},...D({model:t,field:"localParams",isSimple:!0})]}const Pt=[{label:"RUN_JOB_FLOW",value:"RUN_JOB_FLOW"},{label:"ADD_JOB_FLOW_STEPS",value:"ADD_JOB_FLOW_STEPS"}];function Nt(t){const{t:e}=m();return[{type:"input",field:"noteId",name:e("project.node.zeppelin_note_id"),props:{placeholder:e("project.node.zeppelin_note_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_note_id_tips"))}}},{type:"input",field:"paragraphId",name:e("project.node.zeppelin_paragraph_id"),props:{placeholder:e("project.node.zeppelin_paragraph_id_tips")}},{type:"input",field:"restEndpoint",name:e("project.node.zeppelin_rest_endpoint"),props:{placeholder:e("project.node.zeppelin_rest_endpoint_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_rest_endpoint_tips"))}}},{type:"input",field:"productionNoteDirectory",name:e("project.node.zeppelin_production_note_directory"),props:{placeholder:e("project.node.zeppelin_production_note_directory_tips")}},{type:"input",field:"parameters",name:e("project.node.zeppelin_parameters"),props:{placeholder:e("project.node.zeppelin_parameters_tips")}},...D({model:t,field:"localParams",isSimple:!1})]}function Rt(){const{t}=m(),e=l([]),o=l(!1),a=async()=>{if(o.value)return;o.value=!0;const n=await Ve();e.value=(n||[]).map(i=>({label:`${i.namespace}(${i.clusterName})`,value:JSON.stringify({name:i.namespace,cluster:i.clusterName})})),o.value=!1};H(()=>{a()});const r=n=>n.type==="group"?n.label:[n.label];return{type:"select",field:"namespace",name:t("project.node.namespace_cluster"),props:{loading:o,"render-label":r},options:[{type:"group",label:t("project.node.namespace_cluster"),key:t("project.node.namespace_cluster"),children:e}]}}function Mt(t){const{t:e}=m();return[Rt(),{type:"input-number",field:"minCpuCores",span:12,props:{min:0},name:e("project.node.min_cpu"),slots:{suffix:()=>e("project.node.cores")}},{type:"input-number",field:"minMemorySpace",span:12,props:{min:0},name:e("project.node.min_memory"),slots:{suffix:()=>e("project.node.mb")}},{type:"input",field:"image",name:e("project.node.image"),props:{placeholder:e("project.node.image_tips")},validate:{trigger:["input","blur"],message:e("project.node.min_memory_tips")}},...D({model:t,field:"localParams",isSimple:!0})]}function Ct(t){const{t:e}=m();return[{type:"input",field:"condaEnvName",name:e("project.node.jupyter_conda_env_name"),props:{placeholder:e("project.node.jupyter_conda_env_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_conda_env_name_tips"))}}},{type:"input",field:"inputNotePath",name:e("project.node.jupyter_input_note_path"),props:{placeholder:e("project.node.jupyter_input_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_input_note_path_tips"))}}},{type:"input",field:"outputNotePath",name:e("project.node.jupyter_output_note_path"),props:{placeholder:e("project.node.jupyter_output_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_output_note_path_tips"))}}},{type:"input",field:"parameters",name:e("project.node.jupyter_parameters"),props:{placeholder:e("project.node.jupyter_parameters_tips")}},{type:"input",field:"kernel",name:e("project.node.jupyter_kernel"),props:{placeholder:e("project.node.jupyter_kernel_tips")}},{type:"input",field:"engine",name:e("project.node.jupyter_engine"),props:{placeholder:e("project.node.jupyter_engine_tips")}},{type:"input",field:"executionTimeout",name:e("project.node.jupyter_execution_timeout"),props:{placeholder:e("project.node.jupyter_execution_timeout_tips")}},{type:"input",field:"startTimeout",name:e("project.node.jupyter_start_timeout"),props:{placeholder:e("project.node.jupyter_start_timeout_tips")}},{type:"input",field:"others",name:e("project.node.jupyter_others"),props:{placeholder:e("project.node.jupyter_others_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const At=[{label:"MLflow Models",value:"MLflow Models"},{label:"MLflow Projects",value:"MLflow Projects"}];function Ot(t){const{t:e}=m();return[{type:"input",field:"mlflowTrackingUri",name:e("project.node.mlflow_mlflowTrackingUri"),span:12,props:{placeholder:e("project.node.mlflow_mlflowTrackingUri_tips")},validate:{trigger:["input","blur"],required:!1,validator(o,a){if(!a)return new Error(e("project.node.mlflow_mlflowTrackingUri_error_tips"))}}},{type:"select",field:"mlflowTaskType",name:e("project.node.mlflow_taskType"),span:12,options:At},...qt(t),...Gt(t),G(),...D({model:t,field:"localParams",isSimple:!0})]}function qt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),i=l(0),s=l(0),u=()=>{t.isProjects=t.mlflowTaskType==="MLflow Projects"},p=()=>{o.value=t.isProjects?12:0,n.value=t.isProjects?12:0,s.value=t.isProjects?24:0,a.value=t.isProjects&&t.mlflowJobType!="CustomProject"?6:0,i.value=t.isProjects&&t.mlflowJobType!="CustomProject"?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{u(),p()}),x(()=>[t.registerModel],()=>{r.value=t.isProjects&&t.registerModel?6:0}),u(),p(),[{type:"select",field:"mlflowJobType",name:e("project.node.mlflow_jobType"),span:n,options:Ft},{type:"input",field:"experimentName",name:e("project.node.mlflow_experimentName"),span:o,props:{placeholder:e("project.node.mlflow_experimentName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"switch",field:"registerModel",name:e("project.node.mlflow_registerModel"),span:a},{type:"input",field:"modelName",name:e("project.node.mlflow_modelName"),span:r,props:{placeholder:e("project.node.mlflow_modelName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"input",field:"dataPath",name:e("project.node.mlflow_dataPath"),span:i,props:{placeholder:e("project.node.mlflow_dataPath_tips")}},{type:"input",field:"params",name:e("project.node.mlflow_params"),span:s,props:{placeholder:e("project.node.mlflow_params_tips")},validate:{trigger:["input","blur"],required:!1}},...It(t),...Dt(t),...xt(t)]}function It(t){const{t:e}=m(),o=l(0),a=l(0),r=()=>{t.isBasicAlgorithm=t.mlflowJobType==="BasicAlgorithm"&&t.mlflowTaskType==="MLflow Projects"},n=()=>{o.value=t.isBasicAlgorithm?24:0,a.value=t.isBasicAlgorithm?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{r(),n()}),r(),n(),[{type:"select",field:"algorithm",name:e("project.node.mlflow_algorithm"),span:o,options:Ht},{type:"input",field:"searchParams",name:e("project.node.mlflow_searchParams"),props:{placeholder:e("project.node.mlflow_searchParams_tips")},span:a,validate:{trigger:["input","blur"],required:!1}}]}function Dt(t){const{t:e}=m(),o=l(0),a=()=>{t.isAutoML=t.mlflowJobType==="AutoML"&&t.mlflowTaskType==="MLflow Projects"},r=()=>{o.value=t.isAutoML?12:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{a(),r()}),a(),r(),[{type:"select",field:"automlTool",name:e("project.node.mlflow_automlTool"),span:o,options:Yt}]}function xt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=()=>{t.isCustomProject=t.mlflowJobType==="CustomProject"&&t.mlflowTaskType==="MLflow Projects"},i=()=>{o.value=t.isCustomProject?24:0,a.value=t.isCustomProject?12:0,r.value=t.isCustomProject?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{n(),i()}),n(),i(),[{type:"input",field:"mlflowProjectRepository",name:e("project.node.mlflowProjectRepository"),span:o,props:{placeholder:e("project.node.mlflowProjectRepository_tips")}},{type:"input",field:"mlflowProjectVersion",name:e("project.node.mlflowProjectVersion"),span:a,props:{placeholder:e("project.node.mlflowProjectVersion_tips")}}]}const Ft=[{label:"Custom Project",value:"CustomProject"},{label:"AutoML",value:"AutoML"},{label:"BasicAlgorithm",value:"BasicAlgorithm"}],Ht=[{label:"svm",value:"svm"},{label:"lr",value:"lr"},{label:"lightgbm",value:"lightgbm"},{label:"xgboost",value:"xgboost"}],Yt=[{label:"flaml",value:"flaml"},{label:"autosklearn",value:"autosklearn"}];function Gt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=()=>{t.isModels=t.mlflowTaskType==="MLflow Models"},i=()=>{o.value=t.isModels?12:0,a.value=t.isModels?24:0,r.value=t.isModels?12:0};return x(()=>[t.mlflowTaskType],()=>{n(),i()}),n(),i(),[{type:"select",field:"deployType",name:e("project.node.mlflow_deployType"),span:o,options:Ut},{type:"input",field:"deployModelKey",name:e("project.node.mlflow_deployModelKey"),span:a},{type:"input",field:"deployPort",name:e("project.node.mlflow_deployPort"),span:r}]}const Ut=[{label:"MLFLOW",value:"MLFLOW"},{label:"DOCKER",value:"DOCKER"}];function Qt(t){const{t:e}=m(),o=[{label:e("project.node.openmldb_execute_mode_offline"),value:"offline"},{label:e("project.node.openmldb_execute_mode_online"),value:"online"}];return[{type:"input",field:"zk",name:e("project.node.openmldb_zk_address"),props:{placeholder:e("project.node.openmldb_zk_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_address_tips"))}}},{type:"input",field:"zkPath",name:e("project.node.openmldb_zk_path"),props:{placeholder:e("project.node.openmldb_zk_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_path_tips"))}}},{type:"radio",field:"executeMode",name:e("project.node.openmldb_execute_mode"),options:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const Vt=[{label:"Upload",value:"Upload"},{label:"Download",value:"Download"},{label:"Init DVC",value:"Init DVC"}];function Wt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),i=l(0),s=()=>{t.isUpload=t.dvcTaskType==="Upload",t.isDownload=t.dvcTaskType==="Download",t.isInit=t.dvcTaskType==="Init DVC"},u=()=>{o.value=t.isUpload||t.isDownload?24:0,a.value=t.isUpload||t.isDownload?24:0,r.value=t.isUpload||t.isDownload?24:0,n.value=t.isUpload?24:0,i.value=t.isInit?24:0};return x(()=>[t.dvcTaskType],()=>{s(),u()}),s(),u(),[{type:"select",field:"dvcTaskType",name:e("project.node.dvc_task_type"),span:12,options:Vt},{type:"input",field:"dvcRepository",name:e("project.node.dvc_repository"),span:24,props:{placeholder:e("project.node.dvc_repository_tips")},validate:{trigger:["input","blur"],required:!0,message:e("project.node.dvc_empty_tips")}},{type:"input",field:"dvcDataLocation",name:e("project.node.dvc_data_location"),props:{placeholder:"dvcDataLocation"},span:a,validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcLoadSaveDataPath",name:e("project.node.dvc_load_save_data_path"),span:o,validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcVersion",name:e("project.node.dvc_version"),span:r,props:{placeholder:e("project.node.dvc_version_tips")},validate:{trigger:["input","blur"],required:!0,validator(p,c){if((t.isUpload||t.isDownload)&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcMessage",name:e("project.node.dvc_message"),span:n,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(t.isUpload&&!c)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcStoreUrl",name:e("project.node.dvc_store_url"),span:i,validate:{trigger:["input","blur"],required:!0,validator(p,c){if(!t.isInit&&c)return new Error(e("project.node.dvc_empty_tips"))}}}]}function Jt(t){const{t:e}=m();return[{type:"input",field:"address",name:e("project.node.dinky_address"),props:{placeholder:e("project.node.dinky_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_address_tips"))}}},{type:"input",field:"taskId",name:e("project.node.dinky_task_id"),props:{placeholder:e("project.node.dinky_task_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_task_id_tips"))}}},{type:"switch",field:"online",name:e("project.node.dinky_online")},...D({model:t,field:"localParams",isSimple:!1})]}function Bt(t){return[{type:"editor",field:"sagemakerRequestJson",name:"SagemakerRequestJson",props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...D({model:t,field:"localParams",isSimple:!1})]}function $t(t){const{t:e}=m(),o=l(0),a=l(0),r=()=>{o.value=24,a.value=24};return H(()=>{r()}),[{type:"editor",field:"json",name:e("project.node.chunjun_json_template"),span:o,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"custom-parameters",field:"localParams",name:e("project.node.custom_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!i)return new Error(e("project.node.prop_tips"));if(t.localParams.filter(u=>u.prop===i).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:e("project.node.value_tips"),maxLength:256}}]},Kt(24),{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}}]}function Kt(t=24){const{t:e}=m();return{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:zt,span:t}}const zt=[{label:"local",value:"local"},{label:"standlone",value:"standlone"},{label:"yarn-session",value:"yarn-session"},{label:"yarn-per-job",value:"yarn-per-job"}];function Xt(t){const{t:e}=m(),o=l(0),a=l(0),r=l(0),n=l(0),i=l(0),s=l(0),u=()=>{t.showCreateEnvironment=t.isCreateEnvironment&&t.otherParams,t.showCreateConda=!!(t.showCreateEnvironment&&t.pythonEnvTool==="conda"),t.showCreateEnv=!!(t.showCreateEnvironment&&t.pythonEnvTool==="virtualenv")},p=()=>{o.value=t.otherParams?12:0,a.value=t.otherParams?24:0,r.value=t.showCreateEnvironment?12:0,n.value=~t.showCreateEnvironment&t.otherParams?12:0,i.value=t.showCreateEnvironment?24:0,s.value=t.showCreateConda?24:0};return x(()=>[t.isCreateEnvironment,t.pythonEnvTool,t.otherParams],()=>{u(),p()}),[{type:"input",field:"script",name:e("project.node.pytorch_script"),span:24},{type:"input",field:"scriptParams",name:e("project.node.pytorch_script_params"),span:24},{type:"switch",field:"otherParams",name:e("project.node.pytorch_other_params"),span:24},{type:"input",field:"pythonPath",name:e("project.node.pytorch_python_path"),span:a},{type:"switch",field:"isCreateEnvironment",name:e("project.node.pytorch_is_create_environment"),span:o},{type:"input",field:"pythonCommand",name:e("project.node.pytorch_python_command"),span:n,props:{placeholder:e("project.node.pytorch_python_command_tips")}},{type:"select",field:"pythonEnvTool",name:e("project.node.pytorch_python_env_tool"),span:r,options:Zt},{type:"input",field:"requirements",name:e("project.node.pytorch_requirements"),span:i},{type:"input",field:"condaPythonVersion",name:e("project.node.pytorch_conda_python_version"),span:s,props:{placeholder:e("project.node.pytorch_conda_python_version_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const Zt=[{label:"conda",value:"conda"},{label:"virtualenv",value:"virtualenv"}];function er(t){const{t:e}=m();return[{type:"select",field:"hiveCliTaskExecutionType",span:12,name:e("project.node.hive_cli_task_execution_type"),options:tr},{type:"editor",field:"hiveSqlScript",name:e("project.node.hive_sql_script"),props:{language:"sql"}},{type:"input",field:"hiveCliOptions",name:e("project.node.hive_cli_options"),props:{placeholder:e("project.node.hive_cli_options_tips")}},G(),...D({model:t,field:"localParams",isSimple:!1})]}const tr=[{label:"FROM_SCRIPT",value:"SCRIPT"},{label:"FROM_FILE",value:"FILE"}];function rr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"FLINK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),...ke(r),M()],model:r}}function ar({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"FLINK_STREAM",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),I(r),...ke(r),M()],model:r}}function or({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"SHELL",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,rawScript:""});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),...Q(),I(r),...O(r),...we(r),M()],model:r}}function nr({projectCode:t,from:e=0,readonly:o,data:a}){const n=de().currentRoute.value.params.code,i=w({taskType:"SUB_PROCESS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:i}),E(),L(),P(),N(),R(i,!(a!=null&&a.id)),...C(i,t),...O(i),We({model:i,projectCode:t,from:e,processName:a==null?void 0:a.processName,code:e===1?0:Number(n)}),M()],model:i}}function ir({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"PIGEON",name:"",flag:"YES",description:"",timeoutFlag:!1,environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,targetJobName:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),Je(),M()],model:r}}function sr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"PYTHON",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,rawScript:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),...Q(),I(r),...O(r),...we(r),M()],model:r}}function pr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"SPARK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",sparkVersion:"SPARK2",rawScript:"",deployMode:"local",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),...nt(r),M()],model:r}}function lr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"MR",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),...pt(r),M()],model:r}}function ur({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"HTTP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,httpMethod:"GET",httpCheckCondition:"STATUS_CODE_DEFAULT",httpParams:[],url:"",condition:"",connectTimeout:6e4,socketTimeout:6e4,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),...dt(r),M()],model:r}}function cr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"SQL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"MYSQL",displayRows:10,segmentSeparator:"",sql:"",sqlType:"0",preStatements:[],postStatements:[],udfs:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...$(r),...Be(r),..._t(r),M()],model:r}}function dr({projectCode:t,from:e=0,readonly:o,data:a}){var n,i,s,u;const r=w({name:"",taskType:"PROCEDURE",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:(n=a==null?void 0:a.taskParams)!=null&&n.type?(i=a==null?void 0:a.taskParams)==null?void 0:i.type:"MYSQL",datasource:(s=a==null?void 0:a.taskParams)==null?void 0:s.datasource,method:(u=a==null?void 0:a.taskParams)==null?void 0:u.method,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...$(r),...Ke(r),M()],model:r}}function mr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"SQOOP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,isCustomTask:!1,hadoopCustomParams:[],sqoopAdvancedParams:[],mapColumnHive:[],mapColumnJava:[],modelType:"import",sourceType:"MYSQL",srcQueryType:"1",srcColumnType:"0",targetType:"HDFS",sourceMysqlType:"MYSQL",targetHdfsDeleteTargetDir:!0,targetHdfsCompressionCodec:"snappy",targetHdfsFileType:"--as-avrodatafile",targetMysqlType:"MYSQL",targetMysqlUpdateMode:"allowinsert",targetHiveCreateTable:!1,targetHiveDropDelimiter:!1,targetHiveOverWrite:!0,concurrency:1,splitBy:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),...Q(),I(r),...O(r),...vt(r),M()],model:r}}function fr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"SEATUNNEL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,engine:"FLINK",runMode:"RUN",useCustom:!0,deployMode:"client",master:"YARN",masterUrl:"",resourceFiles:[],timeoutNotifyStrategy:["WARN"],rawScript:`env {
    execution.parallelism = 1
}

source {
    FakeSourceStream {
        result_table_name = "fake"
        field_name = "name,age"
    }
}

transform {
    sql {
        sql = "select name,age from fake"
    }
}

sink {
    ConsoleSink {}
}`});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),...Q(),I(r),...O(r),...jt(r),M()],model:r}}function yr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"SWITCH",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,rawScript:"",switchResult:{},dependTaskList:[],nextNode:void 0,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),I(r),...O(r),...St(r,t),M()],model:r}}function _r({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"CONDITIONS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",timeout:30,relation:"AND",dependTaskList:[],preTasks:[],successNode:"success",failedNode:"failed",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),...kt(r),M()],model:r}}function vr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"DATAX",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,customConfig:!1,dsType:"MYSQL",dtType:"MYSQL",preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),...Q(),I(r),...O(r),...wt(r),M()],model:r}}function gr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({taskType:"DEPENDENT",name:"",flag:"YES",description:"",timeoutShowFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,relation:"AND",dependTaskList:[],preTasks:[],timeoutNotifyStrategy:[],timeout:30,timeoutFlag:!1,...a});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!(a!=null&&a.id)),...C(r,t),...A(),...Et(r),M()],model:r}}function jr({projectCode:t,from:e=0,readonly:o,data:a,jsonRef:r,updateElements:n}){const{t:i}=m(),s=w({taskType:"DATA_QUALITY",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,ruleId:1,deployMode:"cluster",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,others:"--conf spark.yarn.maxAppAttempts=1"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:s}),E(),L(),P(),N(),R(s,!(a!=null&&a.id)),...C(s,t),...A(),I(s),...O(s),...ot(s,(u,p)=>{r.value.splice(15,p,...u),n()}),oe(),je(),Te(),be(),he(),Se(),{type:"input",field:"others",name:i("project.node.option_parameters"),props:{type:"textarea",placeholder:i("project.node.option_parameters_tips")}},...D({model:s,field:"localParams",isSimple:!0}),M()],model:s}}function Tr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"EMR",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"ADD_JOB_FLOW_STEPS",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Lt(r),M()],model:r}}function br({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"ZEPPELIN",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Nt(r),M()],model:r}}function hr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"K8S",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Mt(r),M()],model:r}}function Sr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"JUPYTER",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),...Q(),I(r),...O(r),...Ct(r),M()],model:r}}function wr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",algorithm:"svm",mlflowTrackingUri:"http://127.0.0.1:5000",mlflowTaskType:"MLflow Projects",deployType:"MLFLOW",deployPort:"7000",mlflowJobType:"CustomProject",automlTool:"flaml",mlflowCustomProjectParameters:[],delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Ot(r),M()],model:r}}function kr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"OPENMLDB",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,zk:"",zkPath:"",executeMode:"offline"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Qt(r),M()],model:r}}function Er({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],dvcTaskType:"Upload"});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Wt(r),M()],model:r}}function Lr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"DINKY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Jt(r),M()],model:r}}function Pr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...Bt(r),M()],model:r}}function Nr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"CHUNJUN",flag:"YES",description:"",deployMode:"local",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,customConfig:!1,preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...q({projectCode:t,from:e,readonly:o,data:a,model:r}),E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...$t(r),M()],model:r}}function Rr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"PYTORCH",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],pythonEnvTool:"conda",pythonCommand:"${PYTHON_HOME}",condaPythonVersion:"3.7",requirements:"requirements.txt",pythonPath:"."});let n=[];return e===1&&(n=[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),...Q(),I(r),...O(r),...Xt(r),M()],model:r}}function Mr({projectCode:t,from:e=0,readonly:o,data:a}){const r=w({name:"",taskType:"HIVECLI",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30});let n=[];return e===1&&(n=[re(r,o),ae({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,E(),L(),P(),N(),R(r,!r.id),...C(r,t),...A(),I(r),...O(r),...er(r),M()],model:r}}const Cr={SHELL:or,SUB_PROCESS:nr,PYTHON:sr,SPARK:pr,MR:lr,FLINK:rr,HTTP:ur,PIGEON:ir,SQL:cr,PROCEDURE:dr,SQOOP:mr,SEATUNNEL:fr,SWITCH:yr,CONDITIONS:_r,DATAX:vr,DEPENDENT:gr,DATA_QUALITY:jr,EMR:Tr,ZEPPELIN:br,K8S:hr,JUPYTER:Sr,MLFLOW:wr,OPENMLDB:kr,DVC:Er,DINKY:Lr,SAGEMAKER:Pr,CHUNJUN:Nr,FLINK_STREAM:ar,PYTORCH:Rr,HIVECLI:Mr};function Ar({data:t,projectCode:e,from:o,readonly:a,definition:r}){const n=U();n.updateDefinition(Z(r),t==null?void 0:t.code);const i=l([]),s=l([]),u=l({}),p={projectCode:e,from:o,readonly:a,data:t,jsonRef:i,updateElements:()=>{j()}},{model:c,json:y}=Cr[t.taskType||"SHELL"](p);i.value=y,c.preTasks=n.getPreTasks,c.name=n.getName,c.taskExecuteType=fe[t.taskType||"SHELL"].taskExecuteType||"BATCH";const j=()=>{const{rules:T,elements:S}=Ee(i.value,c);s.value=S,u.value=T};return j(),{elementsRef:s,rulesRef:u,model:c}}const Qa=Ne({name:"NodeDetail",emits:["taskTypeChange"],setup(t,{expose:e,emit:o}){const a=U(),r=l(),n=Me("data")||{projectCode:0,data:{taskType:"SHELL"},readonly:!1,from:0},{data:i,projectCode:s,from:u,readonly:p,definition:c}=Z(n),{elementsRef:y,rulesRef:j,model:T}=Ar({data:i,projectCode:s,from:u,readonly:p,definition:c});return x(()=>T.taskType,async S=>{a.updateName(T.name||""),o("taskTypeChange",S)}),e(r),()=>Re(Le,{ref:r,meta:{model:T,rules:j.value,elements:y.value,disabled:Z(p)},layout:{xGap:10}},null)}});export{Qa as default};
