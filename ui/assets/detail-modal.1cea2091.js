import{d as S,b7 as j,b8 as V,b9 as C,u as J,a as L,B as U,n as A,w as F,c as R,bq as K,J as B,t as q}from"./index.536c7d72.js";import{M as Q}from"./index.4d9d5980.js";import z from"./detail.6585e533.js";import{l as O}from"./lodash.bce5b897.js";import{T as W}from"./task-type.8f811883.js";import{q as G}from"./index.c7ac6f91.js";import{u as Y}from"./task-node.c5365e5f.js";import{H as $}from"./common.cc1e0c6c.js";import{P as X}from"./ProfileOutlined.57e6de9b.js";import{N as Z}from"./Icon.36d6d904.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},re=C("path",{d:"M740 161c-61.8 0-112 50.2-112 112c0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1c0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1c0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0 0 34.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2c0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0 1 96 0a48.01 48.01 0 0 1-96 0zm96 600a48.01 48.01 0 0 1-96 0a48.01 48.01 0 0 1 96 0zm408-491a48.01 48.01 0 0 1 0-96a48.01 48.01 0 0 1 0 96z",fill:"currentColor"},null,-1),se=[re],te=S({name:"BranchesOutlined",render:function(r,o){return j(),V("svg",ee,se)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ie=C("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z","fill-opacity":".8",fill:"currentColor"},null,-1),ne=C("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40s40 17.9 40 40s-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 0 0-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9c12.9-18.6 30.9-32.8 52.1-40.9c34-13.1 56-41.6 56-72.7c0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z","fill-opacity":".1",fill:"currentColor"},null,-1),ce=C("path",{d:"M472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c0-39.3-17.2-76-48.4-103.3z","fill-opacity":".8",fill:"currentColor"},null,-1),le=[ie,ne,ce],ae=S({name:"QuestionCircleTwotone",render:function(r,o){return j(),V("svg",oe,le)}});function Se(e){var i,y,n,c;const r={};if(e.taskType==="SUB_PROCESS"&&(r.processDefinitionCode=e.processDefinitionCode),e.taskType&&["SPARK","MR","FLINK","FLINK_STREAM"].includes(e.taskType)&&(r.programType=e.programType,r.mainClass=e.mainClass,e.mainJar&&(r.mainJar={id:e.mainJar}),r.deployMode=e.deployMode,r.appName=e.appName,r.mainArgs=e.mainArgs,r.others=e.others),e.taskType==="SPARK"&&(r.sparkVersion=e.sparkVersion,r.driverCores=e.driverCores,r.driverMemory=e.driverMemory,r.numExecutors=e.numExecutors,r.executorMemory=e.executorMemory,r.executorCores=e.executorCores),(e.taskType==="FLINK"||e.taskType==="FLINK_STREAM")&&(r.flinkVersion=e.flinkVersion,r.jobManagerMemory=e.jobManagerMemory,r.taskManagerMemory=e.taskManagerMemory,r.slot=e.slot,r.taskManager=e.taskManager,r.parallelism=e.parallelism),e.taskType==="HTTP"&&(r.httpMethod=e.httpMethod,r.httpCheckCondition=e.httpCheckCondition,r.httpParams=e.httpParams,r.url=e.url,r.condition=e.condition,r.connectTimeout=e.connectTimeout,r.socketTimeout=e.socketTimeout),e.taskType==="SQOOP")if(r.jobType=e.isCustomTask?"CUSTOM":"TEMPLATE",r.localParams=e.localParams,e.isCustomTask)r.customShell=e.customShell;else{r.jobName=e.jobName,r.hadoopCustomParams=e.hadoopCustomParams,r.sqoopAdvancedParams=e.sqoopAdvancedParams,r.concurrency=e.concurrency,r.splitBy=e.splitBy,r.modelType=e.modelType,r.sourceType=e.sourceType,r.targetType=e.targetType;let t={},l={};switch(e.targetType){case"HIVE":t={hiveDatabase:e.targetHiveDatabase,hiveTable:e.targetHiveTable,createHiveTable:e.targetHiveCreateTable,dropDelimiter:e.targetHiveDropDelimiter,hiveOverWrite:e.targetHiveOverWrite,hiveTargetDir:e.targetHiveTargetDir,replaceDelimiter:e.targetHiveReplaceDelimiter,hivePartitionKey:e.targetHivePartitionKey,hivePartitionValue:e.targetHivePartitionValue};break;case"HDFS":t={targetPath:e.targetHdfsTargetPath,deleteTargetDir:e.targetHdfsDeleteTargetDir,compressionCodec:e.targetHdfsCompressionCodec,fileType:e.targetHdfsFileType,fieldsTerminated:e.targetHdfsFieldsTerminated,linesTerminated:e.targetHdfsLinesTerminated};break;case"MYSQL":t={targetType:e.targetMysqlType,targetDatasource:e.targetMysqlDatasource,targetTable:e.targetMysqlTable,targetColumns:e.targetMysqlColumns,fieldsTerminated:e.targetMysqlFieldsTerminated,linesTerminated:e.targetMysqlLinesTerminated,isUpdate:e.targetMysqlIsUpdate,targetUpdateKey:e.targetMysqlTargetUpdateKey,targetUpdateMode:e.targetMysqlUpdateMode};break}switch(e.sourceType){case"MYSQL":l={srcTable:e.srcQueryType==="1"?"":e.srcTable,srcColumnType:e.srcQueryType==="1"?"0":e.srcColumnType,srcColumns:e.srcQueryType==="1"||e.srcColumnType==="0"?"":e.srcColumns,srcQuerySql:e.srcQueryType==="0"?"":e.sourceMysqlSrcQuerySql,srcQueryType:e.srcQueryType,srcType:e.sourceMysqlType,srcDatasource:e.sourceMysqlDatasource,mapColumnHive:e.mapColumnHive,mapColumnJava:e.mapColumnJava};break;case"HDFS":l={exportDir:e.sourceHdfsExportDir};break;case"HIVE":l={hiveDatabase:e.sourceHiveDatabase,hiveTable:e.sourceHiveTable,hivePartitionKey:e.sourceHivePartitionKey,hivePartitionValue:e.sourceHivePartitionValue};break}r.targetParams=JSON.stringify(t),r.sourceParams=JSON.stringify(l)}if(e.taskType==="SQL"&&(r.type=e.type,r.datasource=e.datasource,r.sql=e.sql,r.sqlType=e.sqlType,r.preStatements=e.preStatements,r.postStatements=e.postStatements,r.segmentSeparator=e.segmentSeparator,r.sendEmail=e.sendEmail,r.displayRows=e.displayRows,e.sqlType==="0"&&e.sendEmail&&(r.title=e.title,r.groupId=e.groupId),e.type==="HIVE"&&(e.udfs&&(r.udfs=e.udfs.join(",")),r.connParams=e.connParams)),e.taskType==="PROCEDURE"&&(r.type=e.type,r.datasource=e.datasource,r.method=e.method),e.taskType==="SEATUNNEL")switch(r.engine=e.engine,r.useCustom=e.useCustom,r.rawScript=e.rawScript,e.engine){case"FLINK":r.runMode=e.runMode,r.others=e.others;break;case"SPARK":r.deployMode=e.deployMode,r.master=e.master,r.masterUrl=e.masterUrl;break}e.taskType==="SWITCH"&&(r.switchResult={},r.switchResult.dependTaskList=e.dependTaskList,r.switchResult.nextNode=e.nextNode),e.taskType==="CONDITIONS"&&(r.dependence={relation:e.relation,dependTaskList:e.dependTaskList},r.conditionResult={},e.successBranch&&(r.conditionResult.successNode=[e.successBranch]),e.failedBranch&&(r.conditionResult.failedNode=[e.failedBranch])),e.taskType==="DATAX"&&(r.customConfig=e.customConfig?1:0,r.customConfig===0?(r.dsType=e.dsType,r.dataSource=e.dataSource,r.dtType=e.dtType,r.dataTarget=e.dataTarget,r.sql=e.sql,r.targetTable=e.targetTable,r.jobSpeedByte=e.jobSpeedByte,r.jobSpeedRecord=e.jobSpeedRecord,r.preStatements=e.preStatements,r.postStatements=e.postStatements):(r.json=e.json,(i=e==null?void 0:e.localParams)==null||i.map(t=>{t.direct="IN",t.type="VARCHAR"})),r.xms=e.xms,r.xmx=e.xmx),e.taskType==="DEPENDENT"&&(r.dependence={relation:e.relation,dependTaskList:e.dependTaskList}),e.taskType==="DATA_QUALITY"&&(r.ruleId=e.ruleId,r.ruleInputParameter={check_type:e.check_type,comparison_execute_sql:e.comparison_execute_sql,comparison_type:e.comparison_type,comparison_name:e.comparison_name,failure_strategy:e.failure_strategy,operator:e.operator,src_connector_type:e.src_connector_type,src_datasource_id:e.src_datasource_id,field_length:e.field_length,begin_time:e.begin_time,deadline:e.deadline,datetime_format:e.datetime_format,enum_list:e.enum_list,regexp_pattern:e.regexp_pattern,target_filter:e.target_filter,src_filter:e.src_filter,src_field:e.src_field,src_table:e.src_table,statistics_execute_sql:e.statistics_execute_sql,statistics_name:e.statistics_name,target_connector_type:e.target_connector_type,target_datasource_id:e.target_datasource_id,target_table:e.target_table,threshold:e.threshold,mapping_columns:JSON.stringify(e.mapping_columns)},r.sparkParameters={deployMode:e.deployMode,driverCores:e.driverCores,driverMemory:e.driverMemory,executorCores:e.executorCores,executorMemory:e.executorMemory,numExecutors:e.numExecutors,others:e.others}),e.taskType==="EMR"&&(r.type=e.type,r.programType=e.programType,r.jobFlowDefineJson=e.jobFlowDefineJson,r.stepsDefineJson=e.stepsDefineJson),e.taskType==="ZEPPELIN"&&(r.noteId=e.noteId,r.paragraphId=e.paragraphId,r.restEndpoint=e.restEndpoint,r.productionNoteDirectory=e.productionNoteDirectory,r.parameters=e.parameters),e.taskType==="K8S"&&(r.namespace=e.namespace,r.minCpuCores=e.minCpuCores,r.minMemorySpace=e.minMemorySpace,r.image=e.image),e.taskType==="JUPYTER"&&(r.condaEnvName=e.condaEnvName,r.inputNotePath=e.inputNotePath,r.outputNotePath=e.outputNotePath,r.parameters=e.parameters,r.kernel=e.kernel,r.engine=e.engine,r.executionTimeout=e.executionTimeout,r.startTimeout=e.startTimeout,r.others=e.others),e.taskType==="MLFLOW"&&(r.algorithm=e.algorithm,r.params=e.params,r.searchParams=e.searchParams,r.dataPath=e.dataPath,r.experimentName=e.experimentName,r.modelName=e.modelName,r.mlflowTrackingUri=e.mlflowTrackingUri,r.mlflowJobType=e.mlflowJobType,r.automlTool=e.automlTool,r.registerModel=e.registerModel,r.mlflowTaskType=e.mlflowTaskType,r.deployType=e.deployType,r.deployPort=e.deployPort,r.deployModelKey=e.deployModelKey,r.mlflowProjectRepository=e.mlflowProjectRepository,r.mlflowProjectVersion=e.mlflowProjectVersion),e.taskType==="DVC"&&(r.dvcTaskType=e.dvcTaskType,r.dvcRepository=e.dvcRepository,r.dvcVersion=e.dvcVersion,r.dvcDataLocation=e.dvcDataLocation,r.dvcMessage=e.dvcMessage,r.dvcLoadSaveDataPath=e.dvcLoadSaveDataPath,r.dvcStoreUrl=e.dvcStoreUrl),e.taskType==="SAGEMAKER"&&(r.sagemakerRequestJson=e.sagemakerRequestJson),e.taskType==="PYTORCH"&&(r.script=e.script,r.scriptParams=e.scriptParams,r.pythonPath=e.pythonPath,r.isCreateEnvironment=e.isCreateEnvironment,r.pythonCommand=e.pythonCommand,r.pythonEnvTool=e.pythonEnvTool,r.requirements=e.requirements,r.condaPythonVersion=e.condaPythonVersion),e.taskType==="DINKY"&&(r.address=e.address,r.taskId=e.taskId,r.online=e.online),e.taskType==="OPENMLDB"&&(r.zk=e.zk,r.zkPath=e.zkPath,r.executeMode=e.executeMode,r.sql=e.sql),e.taskType==="CHUNJUN"&&(r.customConfig=e.customConfig?1:0,r.json=e.json,r.deployMode=e.deployMode,r.others=e.others),e.taskType==="PIGEON"&&(r.targetJobName=e.targetJobName),e.taskType==="HIVECLI"&&(r.hiveCliTaskExecutionType=e.hiveCliTaskExecutionType,r.hiveSqlScript=e.hiveSqlScript,r.hiveCliOptions=e.hiveCliOptions);let o="";e.timeoutNotifyStrategy&&(e.timeoutNotifyStrategy.length===1&&(o=e.timeoutNotifyStrategy[0]),e.timeoutNotifyStrategy.length===2&&(o="WARNFAILED"));const m={processDefinitionCode:e.processName?String(e.processName):"",upstreamCodes:(y=e==null?void 0:e.preTasks)==null?void 0:y.join(","),taskDefinitionJsonObj:{code:e.code,delayTime:e.delayTime?String(e.delayTime):"0",description:e.description,environmentCode:e.environmentCode||-1,failRetryInterval:e.failRetryInterval?String(e.failRetryInterval):"0",failRetryTimes:e.failRetryTimes?String(e.failRetryTimes):"0",flag:e.flag,name:e.name,taskGroupId:e.taskGroupId,taskGroupPriority:e.taskGroupPriority,taskParams:{localParams:(n=e.localParams)==null?void 0:n.map(t=>(t.value=t.value||"",t)),initScript:e.initScript,rawScript:e.rawScript,resourceList:(c=e.resourceList)!=null&&c.length?e.resourceList.map(t=>({id:t})):[],...r},taskPriority:e.taskPriority,taskType:e.taskType,timeout:e.timeoutFlag?e.timeout:0,timeoutFlag:e.timeoutFlag?"OPEN":"CLOSE",timeoutNotifyStrategy:e.timeoutFlag?o:"",workerGroup:e.workerGroup,cpuQuota:e.cpuQuota||-1,memoryMax:e.memoryMax||-1,taskExecuteType:e.taskExecuteType}};return e.timeoutFlag||(m.taskDefinitionJsonObj.timeout=0,m.taskDefinitionJsonObj.timeoutNotifyStrategy=""),m}function me(e){var o,m,i,y,n,c,t,l,g,h,k,_,u,a,T,p,f,v,P,M,b,w,I,N,D,x,d,H,E;const r={...O.exports.omit(e,["environmentCode","timeoutFlag","timeoutNotifyStrategy","taskParams"]),...O.exports.omit(e.taskParams,["resourceList","mainJar","localParams"]),environmentCode:e.environmentCode===-1?null:e.environmentCode,timeoutFlag:e.timeoutFlag==="OPEN",timeoutNotifyStrategy:e.timeoutNotifyStrategy?[e.timeoutNotifyStrategy]:[],localParams:((o=e.taskParams)==null?void 0:o.localParams)||[]};if(e.timeoutNotifyStrategy==="WARNFAILED"&&(r.timeoutNotifyStrategy=["WARN","FAILED"]),(m=e.taskParams)!=null&&m.resourceList&&(r.resourceList=e.taskParams.resourceList.map(s=>s.id)),(i=e.taskParams)!=null&&i.mainJar&&(r.mainJar=(y=e.taskParams)==null?void 0:y.mainJar.id),(n=e.taskParams)!=null&&n.method&&(r.method=(c=e.taskParams)==null?void 0:c.method),(t=e.taskParams)!=null&&t.targetParams){const s=JSON.parse(e.taskParams.targetParams);r.targetHiveDatabase=s.hiveDatabase,r.targetHiveTable=s.hiveTable,r.targetHiveCreateTable=s.createHiveTable,r.targetHiveDropDelimiter=s.dropDelimiter,r.targetHiveOverWrite=s.hiveOverWrite===void 0?!0:s.hiveOverWrite,r.targetHiveTargetDir=s.hiveTargetDir,r.targetHiveReplaceDelimiter=s.replaceDelimiter,r.targetHivePartitionKey=s.hivePartitionKey,r.targetHivePartitionValue=s.hivePartitionValue,r.targetHdfsTargetPath=s.targetPath,r.targetHdfsDeleteTargetDir=s.deleteTargetDir===void 0?!0:s.deleteTargetDir,r.targetHdfsCompressionCodec=s.compressionCodec===void 0?"snappy":s.compressionCodec,r.targetHdfsFileType=s.fileType===void 0?"--as-avrodatafile":s.fileType,r.targetHdfsFieldsTerminated=s.fieldsTerminated,r.targetHdfsLinesTerminated=s.linesTerminated,r.targetMysqlType=s.targetType,r.targetMysqlDatasource=s.targetDatasource,r.targetMysqlTable=s.targetTable,r.targetMysqlColumns=s.targetColumns,r.targetMysqlFieldsTerminated=s.fieldsTerminated,r.targetMysqlLinesTerminated=s.linesTerminated,r.targetMysqlIsUpdate=s.isUpdate,r.targetMysqlTargetUpdateKey=s.targetUpdateKey,r.targetMysqlUpdateMode=s.targetUpdateMode===void 0?"allowinsert":s.targetUpdateMode}if((l=e.taskParams)!=null&&l.sourceParams){const s=JSON.parse(e.taskParams.sourceParams);r.srcTable=s.srcTable,r.srcColumnType=s.srcColumnType,r.srcColumns=s.srcColumns,r.sourceMysqlSrcQuerySql=s.srcQuerySql,r.srcQueryType=s.srcQueryType,r.sourceMysqlType=s.srcType,r.sourceMysqlDatasource=s.srcDatasource,r.mapColumnHive=s.mapColumnHive||[],r.mapColumnJava=s.mapColumnJava||[],r.sourceHdfsExportDir=s.exportDir,r.sourceHiveDatabase=s.hiveDatabase,r.sourceHiveTable=s.hiveTable,r.sourceHivePartitionKey=s.hivePartitionKey,r.sourceHivePartitionValue=s.hivePartitionValue}if((g=e.taskParams)!=null&&g.rawScript&&(r.rawScript=(h=e.taskParams)==null?void 0:h.rawScript),(k=e.taskParams)!=null&&k.initScript&&(r.initScript=(_=e.taskParams)==null?void 0:_.initScript),(u=e.taskParams)!=null&&u.switchResult&&(r.switchResult=e.taskParams.switchResult,r.dependTaskList=(a=e.taskParams.switchResult)!=null&&a.dependTaskList?(T=e.taskParams.switchResult)==null?void 0:T.dependTaskList:[],r.nextNode=(p=e.taskParams.switchResult)==null?void 0:p.nextNode),(f=e.taskParams)!=null&&f.dependence){const s=JSON.parse(JSON.stringify(e.taskParams.dependence));r.dependTaskList=s.dependTaskList||[],r.relation=s.relation}return(v=e.taskParams)!=null&&v.ruleInputParameter&&(r.check_type=e.taskParams.ruleInputParameter.check_type,r.comparison_execute_sql=e.taskParams.ruleInputParameter.comparison_execute_sql,r.comparison_type=e.taskParams.ruleInputParameter.comparison_type,r.comparison_name=e.taskParams.ruleInputParameter.comparison_name,r.failure_strategy=e.taskParams.ruleInputParameter.failure_strategy,r.operator=e.taskParams.ruleInputParameter.operator,r.src_connector_type=e.taskParams.ruleInputParameter.src_connector_type,r.src_datasource_id=e.taskParams.ruleInputParameter.src_datasource_id,r.src_table=e.taskParams.ruleInputParameter.src_table,r.field_length=e.taskParams.ruleInputParameter.field_length,r.begin_time=e.taskParams.ruleInputParameter.begin_time,r.deadline=e.taskParams.ruleInputParameter.deadline,r.datetime_format=e.taskParams.ruleInputParameter.datetime_format,r.target_filter=e.taskParams.ruleInputParameter.target_filter,r.regexp_pattern=e.taskParams.ruleInputParameter.regexp_pattern,r.enum_list=e.taskParams.ruleInputParameter.enum_list,r.src_filter=e.taskParams.ruleInputParameter.src_filter,r.src_field=e.taskParams.ruleInputParameter.src_field,r.statistics_execute_sql=e.taskParams.ruleInputParameter.statistics_execute_sql,r.statistics_name=e.taskParams.ruleInputParameter.statistics_name,r.target_connector_type=e.taskParams.ruleInputParameter.target_connector_type,r.target_datasource_id=e.taskParams.ruleInputParameter.target_datasource_id,r.target_table=e.taskParams.ruleInputParameter.target_table,r.threshold=e.taskParams.ruleInputParameter.threshold,e.taskParams.ruleInputParameter.mapping_columns&&(r.mapping_columns=JSON.parse(e.taskParams.ruleInputParameter.mapping_columns))),(P=e.taskParams)!=null&&P.sparkParameters&&(r.deployMode=e.taskParams.sparkParameters.deployMode,r.driverCores=e.taskParams.sparkParameters.driverCores,r.driverMemory=e.taskParams.sparkParameters.driverMemory,r.executorCores=e.taskParams.sparkParameters.executorCores,r.executorMemory=e.taskParams.sparkParameters.executorMemory,r.numExecutors=e.taskParams.sparkParameters.numExecutors,r.others=e.taskParams.sparkParameters.others),(w=(b=(M=e.taskParams)==null?void 0:M.conditionResult)==null?void 0:b.successNode)!=null&&w.length&&(r.successBranch=e.taskParams.conditionResult.successNode[0]),(D=(N=(I=e.taskParams)==null?void 0:I.conditionResult)==null?void 0:N.failedNode)!=null&&D.length&&(r.failedBranch=e.taskParams.conditionResult.failedNode[0]),(x=e.taskParams)!=null&&x.udfs&&(r.udfs=(d=e.taskParams.udfs)==null?void 0:d.split(",")),((H=e.taskParams)==null?void 0:H.customConfig)!==void 0&&(r.customConfig=e.taskParams.customConfig===1),(E=e.taskParams)!=null&&E.jobType&&(r.isCustomTask=e.taskParams.jobType==="CUSTOM"),r}const ue={show:{type:Boolean,default:!1},data:{type:Object,default:{code:0,taskType:"SHELL",name:""}},projectCode:{type:Number,required:!0,default:0},readonly:{type:Boolean,default:!1},from:{type:Number,default:0},definition:{type:Object},processInstance:{type:Object},taskInstance:{type:Object},saving:{type:Boolean,default:!1}},pe=S({name:"NodeDetailModal",props:ue,emits:["cancel","submit","viewLog"],setup(e,{emit:r}){const{t:o,locale:m}=J(),i=K(),y=Y(),n=u=>()=>q(Z,null,{default:()=>q(u)}),c=L(),t=async()=>{await c.value.value.validate(),r("submit",{data:c.value.value.getValues()})},l=()=>{r("cancel")},g=L([]),h=()=>{e.taskInstance&&r("viewLog",e.taskInstance.id,e.taskInstance.taskType)},k=(u,a)=>{var T;g.value=[{text:o("project.node.instructions"),show:!!(a&&!((T=W[a])!=null&&T.helperLinkDisable)),action:()=>{let p=a==null?void 0:a.toLowerCase().replace("_","-");a==="PROCEDURE"&&(p="stored-procedure");const f="https://dolphinscheduler.apache.org/"+m.value.toLowerCase().replace("_","-")+"/docs/latest/user_doc/guide/task/"+p+".html";window.open(f)},icon:n(ae)},{text:o("project.node.view_history"),show:!!e.taskInstance,action:()=>{i.push({name:"task-instance",params:{processInstanceId:u.id,taskName:e.data.name}})},icon:n($)},{text:o("project.node.view_log"),show:!!e.taskInstance,action:()=>{h()},icon:n(X)},{text:o("project.node.enter_this_child_node"),show:e.data.taskType==="SUB_PROCESS",disabled:!e.data.id||i.currentRoute.value.name==="workflow-instance-detail"&&!e.taskInstance,action:()=>{var p,f;i.currentRoute.value.name==="workflow-instance-detail"?G({taskId:(p=e.taskInstance)==null?void 0:p.id},{projectCode:e.projectCode}).then(v=>{var P;i.push({name:"workflow-instance-detail",params:{id:v.subProcessInstanceId},query:{code:(P=e.data.taskParams)==null?void 0:P.processDefinitionCode}})}):i.push({name:"workflow-definition-detail",params:{code:(f=e.data.taskParams)==null?void 0:f.processDefinitionCode}})},icon:n(te)}]},_=u=>{e.data.taskType=u,k(e.processInstance,e.data.taskType)};return U("data",A(()=>({projectCode:e.projectCode,data:e.data,from:e.from,readonly:e.readonly,definition:e.definition}))),F(()=>[e.show,e.data],async()=>{!e.show||(k(e.processInstance,e.data.taskType),y.init(),await B(),c.value.value.setValues(me(e.data)))}),()=>R(Q,{show:e.show,title:e.from===1?`${o("project.task.current_task_settings")}`:`${o("project.node.current_node_settings")}`,onConfirm:t,confirmLoading:e.saving,confirmDisabled:e.readonly,onCancel:l,headerLinks:g},{default:()=>[R(z,{ref:c,onTaskTypeChange:_,key:e.data.taskType},null)]})}}),Me=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{pe as N,Me as d,Se as f};
