import{d as b,a as G,t as r,b7 as D,b8 as q,b9 as V,b5 as E,ba as B,c as N,F as O,bd as f,ak as T,M as w,z as L}from"./index.536c7d72.js";import{N as K}from"./Form.b918a62f.js";import{a as C,g as H,b as J,N as I}from"./Grid.f7dd02c2.js";import{N as Y}from"./Spin.5bd91cff.js";import{l as p}from"./lodash.bce5b897.js";import{N as z}from"./Input.4b8b409e.js";import{N as P}from"./Radio.8f1c774c.js";import{N as x}from"./Space.8c5cfc39.js";import{N as Q}from"./RadioGroup.5a44255f.js";import{M as W}from"./index.ebf19dc1.js";import{u as k,N as v}from"./Button.9dd5ee3c.js";import{D as _}from"./DeleteOutlined.0c0bc8fc.js";import{N as X,b as Z,c as ee}from"./FormItem.67716b88.js";import{k as $}from"./index.8209174c.js";import{N as te}from"./Switch.57a995f1.js";import{N as oe}from"./InputNumber.1f688029.js";import{a as ne}from"./Select.eddb521d.js";import{a as M,N as re}from"./Checkbox.9b98fe51.js";import{N as se}from"./TreeSelect.c15d3653.js";const ae=Object.assign(Object.assign({},H),Z),F=b({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:ae,setup(){const e=G(null);return{formItemInstRef:e,validate:(...o)=>{const{value:s}=e;if(s)return s.validate(...o)},restoreValidation:()=>{const{value:o}=e;if(o)return o.restoreValidation()}}},render(){return r(C,$(this.$.vnode.props||{},J),{default:()=>{const e=$(this.$props,ee);return r(X,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},le=V("defs",null,null,-1),ue=V("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"},null,-1),de=V("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"},null,-1),ce=[le,ue,de],R=b({name:"PlusOutlined",render:function(t,n){return D(),q("svg",ie,ce)}});function pe(){const e=E({formRef:G()}),t=async(...u)=>{await e.formRef.validate(...u)},n=u=>{const c=Object.keys(e.formRef.model);for(const i of c)Object.keys(u).includes(i)||delete e.formRef.model[i];o(u)},o=u=>{for(const[c,i]of Object.entries(u))e.formRef.model[c]=i};return{state:e,validate:t,setValues:o,getValues:()=>e.formRef.model,resetValues:n,restoreValidation:()=>{e.formRef.restoreValidation()}}}function j(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const me={meta:{type:Object,default:{},required:!0},layout:{type:Object},loading:{type:Boolean,default:!1}},Ye=b({name:"DSForm",props:me,setup(e,{expose:t}){const{state:n,...o}=pe();return t({...o}),{...B(n)}},render(e){let t;const{loading:n,layout:o,meta:s}=e,{elements:a=[],...u}=s;return N(Y,{show:n},{default:()=>[N(K,O(u,{ref:"formRef"}),{default:()=>[N(I,o,j(t=a.map(c=>{let i;const{span:l=24,path:d,widget:m,...h}=c;return N(F,O(h,{span:f(l)===void 0?24:f(l),path:d,key:d||String(Date.now()+Math.random())}),j(i=r(m))?i:{default:()=>[i]})}))?t:{default:()=>[t]})]})]})}});function S(e){return e?(Array.isArray(e)&&e.forEach(t=>(t!=null&&t.message||delete t.message,t)),e.message||delete e.message,e):{}}function fe(e,t){const{props:n,field:o}=p.exports.isFunction(e)?e():e;return r(z,{...n,value:t[o],onUpdateValue:s=>void(t[o]=s)})}function he(e,t){const{props:n,field:o,options:s}=p.exports.isFunction(e)?e():e;return s?r(Q,{...n,value:t[o],onUpdateValue:a=>void(t[o]=a)},()=>r(x,null,()=>f(s).map(a=>r(P,a,()=>a.label)))):r(P,{...n,value:t[o],onUpdateChecked:a=>void(t[o]=a)})}function ge(e,t){const{props:n,field:o}=p.exports.isFunction(e)?e():e;return r(W,{options:n,value:t[o],onUpdateValue:s=>void(t[o]=s)})}const be=b({name:"CustomParameters",emits:["add"],setup(e,t){const n=k({});return{onAdd:()=>void t.emit("add"),disabled:n.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:n}=this;return r(x,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),r(v,{circle:!0,size:"small",type:"info",class:"btn-create-custom-parameter",disabled:e,onClick:n},{icon:()=>r(R)})]})}}),ve=e=>{const t={},n={},o=(s,a,u)=>{s.forEach(c=>{const i=p.exports.isFunction(c)?c():c;if(Array.isArray(i.children)){const l={},d={};o(i.children,l,d),a[i.field]=[l],u[i.field]={type:"array",fields:d};return}else a[i.field]=i.value||null,i.validate&&(u[i.field]=S(i.validate))})};return o(e,t,n),{defaultValue:t,ruleItem:n}};function ye(e,t,n){const o=p.exports.isFunction(e)?e():e,{field:s,children:a=[]}=o,{defaultValue:u,ruleItem:c}=ve(a);n.push(c);const i=(d,m,h)=>a.map(y=>{const g=p.exports.isFunction(y)?y(m):y;return r(F,{showLabel:!!g.name,path:g.path||`${s}[${m}].${g.field}`,label:g.name,span:f(g.span),class:g.class,rule:g.rule},()=>A(g,d))});return r(be,{onAdd:()=>{n.push(c),t[s].push({...u})}},{default:({disabled:d})=>t[s].map((m,h)=>r(I,{xGap:10},()=>[...i(m,h),r(C,{span:2},()=>r(v,{circle:!0,type:"error",size:"small",disabled:d,class:"btn-delete-custom-parameter",onClick:()=>{t[s].splice(h,1),n.splice(h,1)}},{icon:()=>r(_)}))]))})}function xe(e,t){const{props:n,field:o,slots:s={}}=p.exports.isFunction(e)?e():e;return r(te,{...n,value:t[o],onUpdateValue:a=>void(t[o]=a)},{...s})}function Ne(e,t){const{props:n,field:o,slots:s={}}=p.exports.isFunction(e)?e():e;return r(oe,{...n,value:t[o],onUpdateValue:a=>void(t[o]=a)},{...s})}function Ce(e,t){const{props:n,field:o,options:s=[]}=p.exports.isFunction(e)?e():e;return r(ne,{...n,value:t[o],onUpdateValue:a=>{t[o]=a,n!=null&&n.onUpdateValue&&n.onUpdateValue(a)},options:f(s)})}function Ie(e,t){const{props:n,field:o,options:s}=p.exports.isFunction(e)?e():e;return s?r(re,{value:t[o],onUpdateValue:a=>void(t[o]=a)},()=>r(x,null,()=>f(s).map(a=>r(M,{...a})))):r(M,{...n,value:t[o],onUpdateChecked:a=>void(t[o]=a)})}function Fe(e,t){const{props:n={},field:o,options:s=[]}=p.exports.isFunction(e)?e():e;return r(se,{...n,value:t[o],onUpdateValue:a=>void(t[o]=a),options:f(s)})}const Ve=b({name:"MultiInput",emits:["add"],setup(e,t){const n=k({});return{onAdd:()=>void t.emit("add"),disabled:n.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:n}=this;return r(x,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),r(v,{circle:!0,size:"small",type:"info",disabled:e,onClick:n},{icon:()=>r(R)})]})}});function we(e,t,n){const{field:o}=p.exports.isFunction(e)?e():e,s=(u,c)=>{const i=p.exports.isFunction(e)?e():e;return r(F,{showLabel:!1,path:`${i.field}[${c}]`,span:f(i.span)},()=>r(z,{...i.props,value:u,onUpdateValue:l=>void(t[i.field][c]=l)}))};return r(Ve,{name:o,onAdd:()=>{t[o].push("")}},{default:({disabled:u})=>t[o].map((c,i)=>r(I,{xGap:10},()=>[s(c,i),r(C,{span:2},()=>r(v,{circle:!0,type:"error",size:"small",disabled:u,onClick:()=>{t[o].splice(i,1)}},{icon:()=>r(_)}))]))})}const ke=b({name:"MultiCondition",emits:["add"],setup(e,t){const n=k({});return{onAdd:()=>void t.emit("add"),disabled:n.mergedDisabledRef}},render(){const{disabled:e,$slots:t,onAdd:n}=this;return r(x,{vertical:!0,style:{width:"100%"}},{default:()=>[w(t,"default",{disabled:e}),r(v,{circle:!0,size:"tiny",type:"info",disabled:e,onClick:n},{icon:()=>r(R)})]})}});function _e(e,t,n){const o={},{field:s,children:a=[]}=p.exports.isFunction(e)?e():e;a.forEach(i=>{const l=p.exports.isFunction(i)?i():i;l.validate&&(o[l.field]=S(l.validate))});const u=(i,l)=>a.map(d=>{const m=p.exports.isFunction(d)?d():d;return r(F,{showLabel:!!d.name,label:d.name?d.name:"",path:`${t[s]}[${l}].${m.field}`,span:f(m.span)},()=>A(d,t[s][l]))});return r(ke,{name:s,onAdd:()=>{const i={};a.map(l=>{const{field:d}=p.exports.isFunction(l)?l():l;d&&(i[d]=null)}),t[s].push(i)}},{default:({disabled:i})=>t[s].map((l,d)=>r(I,{xGap:10},()=>[...u(l,d),r(C,{span:2,style:{alignSelf:"center"}},()=>r(v,{circle:!0,type:"error",size:"tiny",disabled:i,onClick:()=>{t[s].splice(d,1)}},{icon:()=>r(_)}))]))})}const U=Object.freeze(Object.defineProperty({__proto__:null,renderInput:fe,renderRadio:he,renderEditor:ge,renderCustomParameters:ye,renderSwitch:xe,renderInputNumber:Ne,renderSelect:Ce,renderCheckbox:Ie,renderTreeSelect:Fe,renderMultiInput:we,renderMultiCondition:_e},Symbol.toStringTag,{value:"Module"})),Re=["input","radio","editor","custom-parameters","switch","input-number","select","checkbox","tree-select","multi-input","custom","multi-condition"],A=(e,t,n)=>{const{type:o="input",widget:s,field:a}=p.exports.isFunction(e)?e():e;if(!Re.includes(o))return null;const u=`render${p.exports.upperFirst(p.exports.camelCase(o))}`;if(o==="custom")return s||null;if(o==="custom-parameters"){let c=[];return n&&!n[a]&&(c=n[a]=[]),U[u](e,t,c)}return U[u](e,t)};function Qe(e,t){const n={},o={},s=[];for(const a of e){const u=p.exports.isFunction(a)?a():a,{name:c,value:i,field:l,children:d,validate:m,...h}=u;(i||i===0)&&(t[l]=i,o[l]=i),m&&(n[l]=S(m));const y={showLabel:!!c,...p.exports.omit(h,["type","props","options"]),label:c,path:d?"":l,widget:()=>A(a,t,n),span:L(u,"span")};s.push(y)}return{rules:n,elements:s,initialValues:o}}export{Ye as F,Qe as g};
